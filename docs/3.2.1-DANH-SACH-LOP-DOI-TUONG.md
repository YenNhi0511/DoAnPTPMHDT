# 3.2.1. DANH SÁCH LỚP CÁC ĐỐI TƯỢNG

## Tổng Quan

Hệ thống Tuyển Dụng Nhân Sự Thông Minh được thiết kế theo kiến trúc phân tầng, sử dụng mẫu thiết kế **Entity-Control-Boundary (ECB)** để tách biệt rõ ràng giữa các lớp nghiệp vụ, xử lý logic và giao diện người dùng. Hệ thống được chia thành 5 module chức năng độc lập nhưng có liên kết chặt chẽ với nhau.

### Phân Loại Các Lớp

Các lớp trong hệ thống được phân thành 3 loại chính:

- **Entity (Thực thể)**: Đại diện cho các đối tượng nghiệp vụ, lưu trữ dữ liệu và trạng thái của hệ thống
- **Control (Điều khiển)**: Xử lý logic nghiệp vụ, điều phối luồng xử lý giữa các lớp
- **Boundary (Biên)**: Giao tiếp với người dùng và các hệ thống bên ngoài (Forms, Views, External Services)

---

## MODULE 1: AUTHENTICATION & USER MANAGEMENT

**Phạm vi**: UC-01, UC-02, UC-03, UC-04, UC-24

### 1.1. Entity Classes (Lớp Thực Thể)

#### **User**

**Mô tả**: Lớp core của toàn hệ thống, quản lý thông tin người dùng và xác thực

**Thuộc tính**:

- Mã người dùng
- Email
- Mật khẩu (được mã hóa bằng bcrypt)
- Họ tên
- Số điện thoại
- Vai trò (CANDIDATE, RECRUITER, INTERVIEWER, ADMIN)
- Trạng thái kích hoạt
- Trạng thái xác thực
- Ngày đăng ký
- Lần đăng nhập cuối
- Số lần đăng nhập sai
- Thời điểm khóa tài khoản

**Trách nhiệm**:

- Xác thực mật khẩu
- Đặt mật khẩu mới
- Khóa tài khoản (tự động sau 5 lần đăng nhập sai)
- Đặt lại số lần đăng nhập sai

**Quan hệ**:

- 1 User có 0..1 UserProfile
- 1 User có nhiều OTPVerification
- Được tham chiếu bởi tất cả các module khác

---

#### **OTPVerification**

**Mô tả**: Quản lý mã OTP cho xác thực 2 yếu tố và đặt lại mật khẩu

**Thuộc tính**:

- Mã xác thực
- Người dùng (liên kết với User)
- Mã OTP (6 chữ số)
- Loại OTP (REGISTRATION, PASSWORD_RESET)
- Thời gian tạo
- Thời gian hết hạn (10 phút)
- Trạng thái đã sử dụng
- Số lần thử (tối đa 5 lần)

**Trách nhiệm**:

- Kiểm tra hợp lệ
- Kiểm tra hết hạn
- Đánh dấu đã sử dụng

**Ràng buộc**:

- 1 user chỉ có 1 OTP active tại một thời điểm
- OTP hết hạn sau 10 phút
- Tối đa 5 lần nhập sai

---

#### **UserProfile**

**Mô tả**: Lưu trữ thông tin chi tiết hồ sơ người dùng

**Thuộc tính**:

- Mã hồ sơ
- Người dùng (1-1 với User)
- Ảnh đại diện
- Địa chỉ
- Thành phố
- Quốc gia
- Tiểu sử
- Tên công ty (với role RECRUITER)
- Logo công ty
- Website

**Trách nhiệm**:

- Cập nhật hồ sơ
- Tải ảnh đại diện

---

#### **JWTToken**

**Mô tả**: Quản lý token JWT cho phiên đăng nhập

**Thuộc tính**:

- Token truy cập (Access Token - 15 phút)
- Token làm mới (Refresh Token - 7 ngày)
- Loại token
- Thời gian hết hạn

**Trách nhiệm**:

- Kiểm tra hết hạn

---

### 1.2. Control Classes (Lớp Điều Khiển)

#### **AuthenticationController**

**Mô tả**: Xử lý toàn bộ logic xác thực và quản lý phiên đăng nhập

**Trách nhiệm**:

- Đăng ký tài khoản
- Gửi mã OTP
- Xác thực mã OTP
- Đăng nhập (với kiểm tra tài khoản bị khóa)
- Đăng xuất
- Làm mới phiên đăng nhập
- Quên mật khẩu
- Đặt lại mật khẩu
- Kiểm tra tính hợp lệ email
- Kiểm tra email đã tồn tại
- Tạo mã OTP (6 chữ số ngẫu nhiên)
- Mã hóa mật khẩu (bcrypt)

**Use Cases**: UC-01 (Đăng ký), UC-02 (Đăng nhập), UC-03 (Đăng xuất)

---

#### **ProfileController**

**Mô tả**: Quản lý thông tin hồ sơ cá nhân

**Trách nhiệm**:

- Xem hồ sơ
- Cập nhật hồ sơ
- Đổi mật khẩu
- Tải ảnh đại diện
- Kiểm tra tính hợp lệ dữ liệu

**Use Cases**: UC-04 (Quản lý hồ sơ cá nhân)

---

#### **UserManagementController**

**Mô tả**: Quản lý người dùng (chỉ dành cho Admin)

**Trách nhiệm**:

- Liệt kê người dùng (có phân trang, lọc)
- Xem chi tiết người dùng
- Cập nhật người dùng
- Khóa người dùng
- Mở khóa người dùng
- Xóa người dùng
- Đặt lại mật khẩu
- Kiểm tra quyền quản trị

**Use Cases**: UC-24 (Quản lý người dùng)

---

### 1.3. Boundary Classes (Lớp Biên)

#### **RegisterForm** (Input Form)

**Mô tả**: Form đăng ký tài khoản

**Thuộc tính**:

- Email
- Mật khẩu
- Họ tên
- Số điện thoại
- Vai trò
- Tên công ty (nếu là Recruiter)

**Trách nhiệm**:

- Kiểm tra tính hợp lệ (format email, độ mạnh mật khẩu)

---

#### **LoginForm** (Input Form)

**Mô tả**: Form đăng nhập

**Thuộc tính**:

- Email
- Mật khẩu

**Trách nhiệm**:

- Kiểm tra tính hợp lệ

---

#### **ProfileForm** (Input Form)

**Mô tả**: Form cập nhật hồ sơ

**Thuộc tính**:

- Họ tên
- Số điện thoại
- Địa chỉ
- Ảnh đại diện
- Tiểu sử

**Trách nhiệm**:

- Kiểm tra tính hợp lệ

---

#### **EmailService** (External Service)

**Mô tả**: Dịch vụ gửi email tự động

**Trách nhiệm**:

- Gửi email OTP
- Gửi email chào mừng
- Gửi email đặt lại mật khẩu
- Lấy mẫu email (template)

**Công nghệ**: SMTP (Gmail/SendGrid), Django Email Backend

---

## MODULE 2: JOB MANAGEMENT

**Phạm vi**: UC-05, UC-06, UC-07, UC-08, UC-09

### 2.1. Entity Classes (Lớp Thực Thể)

#### **Job**

**Mô tả**: Lớp core của module, quản lý tin tuyển dụng

**Thuộc tính**:

- Mã tin
- Nhà tuyển dụng (liên kết với User)
- Tiêu đề
- Mô tả công việc
- Yêu cầu
- Mức lương tối thiểu
- Mức lương tối đa
- Đơn vị tiền tệ (VND, USD)
- Địa điểm
- Loại công việc (FULL_TIME, PART_TIME, REMOTE, INTERNSHIP)
- Trạng thái (DRAFT, OPEN, CLOSED)
- Số lượng cần tuyển
- Hạn nộp hồ sơ
- Ngày đăng
- Ngày cập nhật
- Số lượt xem
- Số hồ sơ ứng tuyển

**Trách nhiệm**:

- Kiểm tra còn hiệu lực
- Kiểm tra hết hạn
- Có thể ứng tuyển
- Tăng lượt xem

**Quan hệ**:

- 1 Company có nhiều Job
- 1 Job có nhiều Application (Module 3)
- 1 Job có nhiều SavedJob

---

#### **Company**

**Mô tả**: Thông tin công ty đăng tuyển

**Thuộc tính**:

- Mã công ty
- Tên công ty
- Logo
- Giới thiệu
- Website
- Ngành nghề
- Quy mô (1-50, 51-200, 201-500, 500+)
- Năm thành lập
- Địa chỉ
- Thành phố
- Quốc gia

**Trách nhiệm**:

- Lấy tin đang tuyển
- Đếm số tin tuyển dụng

**Quan hệ**:

- 1 Company có nhiều Job
- 1 Recruiter thuộc 1 Company

---

#### **SavedJob**

**Mô tả**: Lưu việc làm yêu thích (Many-to-Many giữa User và Job)

**Thuộc tính**:

- Mã lưu
- Ứng viên (Candidate)
- Tin tuyển dụng
- Thời gian lưu
- Ghi chú

**Trách nhiệm**:

- Xóa khỏi danh sách

---

#### **JobSearchCriteria**

**Mô tả**: Tiêu chí tìm kiếm công việc

**Thuộc tính**:

- Từ khóa
- Địa điểm
- Loại công việc
- Mức lương tối thiểu
- Mức lương tối đa
- Sắp xếp theo (DATE, SALARY, RELEVANCE)
- Trang hiện tại
- Số tin mỗi trang

---

### 2.2. Control Classes (Lớp Điều Khiển)

#### **JobController**

**Mô tả**: Quản lý tin tuyển dụng (CRUD)

**Trách nhiệm**:

- Tạo tin tuyển dụng
- Cập nhật tin tuyển dụng
- Xóa tin tuyển dụng (chỉ khi chưa có ứng viên)
- Thay đổi trạng thái (DRAFT → OPEN → CLOSED)
- Xem chi tiết tin
- Lấy danh sách tin của nhà tuyển dụng
- Tăng lượt xem
- Kiểm tra tính hợp lệ dữ liệu
- Kiểm tra quyền sở hữu
- Kiểm tra có thể xóa

**Use Cases**: UC-05 (Đăng tin), UC-08 (Sửa tin), UC-09 (Quản lý trạng thái)

---

#### **JobSearchController**

**Mô tả**: Tìm kiếm và lọc công việc

**Trách nhiệm**:

- Tìm kiếm công việc (full-text search)
- Lọc công việc (theo địa điểm, loại, lương)
- Sắp xếp công việc
- Lấy tin nổi bật
- Lấy tin tương tự (recommendation)
- Xây dựng câu truy vấn (query builder)
- Áp dụng bộ lọc

**Use Cases**: UC-06 (Tìm kiếm), UC-07 (Xem chi tiết)

---

#### **SavedJobController**

**Mô tả**: Quản lý việc làm đã lưu

**Trách nhiệm**:

- Lưu tin tuyển dụng
- Bỏ lưu tin tuyển dụng
- Lấy danh sách đã lưu
- Kiểm tra đã lưu

---

#### **CompanyController**

**Mô tả**: Quản lý thông tin công ty

**Trách nhiệm**:

- Xem chi tiết công ty
- Lấy tin tuyển dụng của công ty
- Cập nhật thông tin công ty
- Tìm kiếm công ty

---

### 2.3. Boundary Classes (Lớp Biên)

#### **JobForm** (Input Form)

**Thuộc tính**: Tiêu đề, Mô tả công việc, Yêu cầu, Lương, Địa điểm, Loại công việc, Số lượng, Hạn nộp, Trạng thái  
**Trách nhiệm**: Kiểm tra tính hợp lệ

#### **JobSearchForm** (Input Form)

**Thuộc tính**: Từ khóa, Địa điểm, Loại công việc, Khoảng lương, Sắp xếp  
**Trách nhiệm**: Kiểm tra tính hợp lệ

#### **JobListView** (Output View)

**Trách nhiệm**: Hiển thị danh sách tin, phân trang, bộ lọc, thẻ tin

#### **JobDetailView** (Output View)

**Trách nhiệm**: Hiển thị chi tiết tin, công ty, nút ứng tuyển, tin tương tự

#### **NotificationService** (External Service)

**Trách nhiệm**: Thông báo tin mới, cập nhật, đóng

---

## MODULE 3: APPLICATION & AI SCREENING

**Phạm vi**: UC-10, UC-11, UC-12, UC-13, UC-14, UC-15, UC-16

### 3.1. Entity Classes (Lớp Thực Thể)

#### **Application**

**Mô tả**: Hồ sơ ứng tuyển

**Thuộc tính**:

- Mã hồ sơ
- Ứng viên
- Tin tuyển dụng
- File CV
- Thư xin việc
- Trạng thái (SUBMITTED, AI_SCREENING, SCREENING_PASSED, SCREENING_FAILED, INTERVIEWING, OFFERED, REJECTED)
- Ngày nộp
- Ngày cập nhật
- Đã phân tích AI
- Điểm AI

**Trách nhiệm**:

- Có thể rút hồ sơ
- Rút hồ sơ
- Cập nhật trạng thái
- Tải CV

---

#### **AIAnalysis**

**Mô tả**: Kết quả phân tích AI từ Google Gemini

**Thuộc tính**:

- Mã phân tích
- Hồ sơ ứng tuyển
- Điểm tổng thể (0-100)
- Điểm kỹ năng
- Điểm kinh nghiệm
- Điểm học vấn
- Điểm khớp với JD
- Điểm mạnh (JSON)
- Điểm yếu (JSON)
- Khuyến nghị (STRONG_MATCH, GOOD_MATCH, MODERATE_MATCH, WEAK_MATCH, NO_MATCH)
- Lý do
- Thời gian phân tích
- Model version

**Trách nhiệm**:

- Có nên phỏng vấn
- Lấy điểm tổng thể

---

#### **CVFile**

**Mô tả**: File CV đã tải lên

**Thuộc tính**:

- Mã file
- Hồ sơ ứng tuyển
- Tên file gốc
- Tên file lưu trữ
- Kích thước
- Loại file (PDF, DOCX)
- Đường dẫn lưu trữ (Cloud Storage)
- Văn bản đã trích xuất
- Ngày tải lên

**Trách nhiệm**:

- Lấy đường dẫn
- Xóa file

---

#### **ApplicationHistory**

**Mô tả**: Lịch sử thay đổi trạng thái hồ sơ

**Thuộc tính**:

- Mã lịch sử
- Hồ sơ ứng tuyển
- Trạng thái cũ
- Trạng thái mới
- Người thay đổi
- Lý do
- Thời gian

---

### 3.2. Control Classes (Lớp Điều Khiển)

#### **ApplicationController**

**Mô tả**: Quản lý hồ sơ ứng tuyển

**Trách nhiệm**:

- Nộp hồ sơ ứng tuyển
- Xem chi tiết hồ sơ
- Lấy hồ sơ của ứng viên
- Lấy hồ sơ của tin tuyển dụng
- Rút hồ sơ ứng tuyển
- Cập nhật trạng thái hồ sơ
- Tải xuống CV
- Kiểm tra tính hợp lệ hồ sơ
- Kiểm tra trùng lặp (1 user chỉ nộp 1 lần cho 1 job)
- Kích hoạt sàng lọc AI

**Use Cases**: UC-10 (Nộp hồ sơ), UC-13 (Xem hồ sơ đã nộp), UC-14 (Xem danh sách hồ sơ)

---

#### **AIAnalysisController**

**Mô tả**: Xử lý phân tích CV bằng AI

**Trách nhiệm**:

- Phân tích CV (async với Celery)
- Phân tích lại CV
- Lấy kết quả phân tích
- So sánh ứng viên
- Chuẩn bị câu hỏi (prompt cho Gemini)
- Gọi API Gemini
- Phân tích phản hồi AI
- Tính điểm
- Xác định khuyến nghị

**Use Cases**: UC-15 (Phân tích CV tự động), UC-16 (Lọc hồ sơ theo AI)

---

#### **CVProcessingController**

**Mô tả**: Xử lý file CV

**Trách nhiệm**:

- Tải lên CV
- Kiểm tra tính hợp lệ CV
- Trích xuất văn bản từ CV (PDF/DOCX parser)
- Xóa CV
- Kiểm tra kích thước (max 5MB)
- Kiểm tra loại file
- Làm sạch tên file

---

#### **ApplicationFilterController**

**Mô tả**: Lọc và sắp xếp hồ sơ

**Trách nhiệm**:

- Lọc theo trạng thái
- Lọc theo điểm AI
- Lọc theo khoảng thời gian
- Sắp xếp hồ sơ

**Use Cases**: UC-16 (Lọc hồ sơ)

---

### 3.3. Boundary Classes (Lớp Biên)

#### **ApplicationForm** (Input Form)

**Thuộc tính**: File CV, Thư xin việc  
**Trách nhiệm**: Kiểm tra hợp lệ, kích thước, loại file

#### **ApplicationListView** (Output View)

**Trách nhiệm**: Hiển thị danh sách hồ sơ (cho ứng viên/nhà tuyển dụng), bộ lọc, trạng thái

#### **ApplicationDetailView** (Output View)

**Trách nhiệm**: Hiển thị hồ sơ, trình xem CV, lịch sử, phân tích AI, nút thao tác

#### **AIResultView** (Output View)

**Trách nhiệm**: Hiển thị điểm số, khuyến nghị, điểm mạnh/yếu, kỹ năng khớp

#### **GeminiAPIService** (External Service - AI)

**Mô tả**: Tích hợp Google Gemini AI  
**Trách nhiệm**: Gửi yêu cầu phân tích, phân tích phản hồi, xử lý lỗi API, thử lại khi thất bại  
**Công nghệ**: Google Gemini API, API Key management

#### **CloudStorageService** (External Service - Storage)

**Trách nhiệm**: Tải lên file, xóa file, lấy đường dẫn, tạo tên file duy nhất  
**Công nghệ**: AWS S3 / Google Cloud Storage / Azure Blob

#### **EmailNotificationService** (External Service)

**Trách nhiệm**: Gửi email xác nhận nộp hồ sơ, thông báo nhà tuyển dụng, thông báo hoàn tất phân tích AI

#### **CeleryTaskQueue** (External Service - Queue)

**Trách nhiệm**: Xếp hàng phân tích AI (async), lấy trạng thái tác vụ, thử lại tác vụ thất bại  
**Công nghệ**: Celery + Redis

---

## MODULE 4: INTERVIEW MANAGEMENT

**Phạm vi**: UC-17, UC-18, UC-19, UC-20

### 4.1. Entity Classes (Lớp Thực Thể)

#### **Interview**

**Mô tả**: Lịch phỏng vấn

**Thuộc tính**:

- Mã phỏng vấn
- Hồ sơ ứng tuyển
- Vòng phỏng vấn (1, 2, 3, FINAL)
- Loại phỏng vấn (PHONE, VIDEO, ONSITE)
- Thời gian bắt đầu
- Thời gian kết thúc
- Địa điểm
- Link video conference
- Trạng thái (SCHEDULED, COMPLETED, CANCELLED, RESCHEDULED)
- Ghi chú

**Trách nhiệm**:

- Có thể hủy
- Hủy phỏng vấn
- Có thể đổi lịch
- Đổi lịch phỏng vấn

**Quan hệ**:

- 1 Application có nhiều Interview
- 1 Interview có nhiều InterviewPanel

---

#### **InterviewPanel**

**Mô tả**: Hội đồng phỏng vấn (người phỏng vấn)

**Thuộc tính**:

- Mã hội đồng
- Phỏng vấn
- Người phỏng vấn (User)
- Vai trò (LEAD, MEMBER, OBSERVER)
- Đánh giá tổng thể
- Nhận xét
- Khuyến nghị (HIRE, STRONG_HIRE, NO_HIRE, STRONG_NO_HIRE)

**Trách nhiệm**:

- Gửi đánh giá
- Cập nhật đánh giá

**Ràng buộc**: 1 phỏng vấn có ít nhất 1 người phỏng vấn

---

#### **InterviewEvaluation**

**Mô tả**: Đánh giá chi tiết theo tiêu chí

**Thuộc tính**:

- Mã đánh giá
- Hội đồng phỏng vấn
- Tiêu chí (Kỹ thuật, Giao tiếp, Thái độ, ...)
- Điểm số (1-5)
- Nhận xét chi tiết
- Điểm mạnh
- Điểm yếu

**Trách nhiệm**:

- Tính điểm trung bình

---

#### **InterviewSchedule**

**Mô tả**: Lịch sử đổi lịch phỏng vấn

**Thuộc tính**:

- Mã lịch
- Phỏng vấn
- Thời gian cũ
- Thời gian mới
- Người yêu cầu
- Lý do
- Thời gian yêu cầu

---

### 4.2. Control Classes (Lớp Điều Khiển)

#### **InterviewController**

**Mô tả**: Quản lý lịch phỏng vấn

**Trách nhiệm**:

- Tạo lịch phỏng vấn
- Cập nhật lịch phỏng vấn
- Hủy phỏng vấn
- Đổi lịch phỏng vấn
- Xem lịch phỏng vấn
- Lấy danh sách phỏng vấn
- Kiểm tra xung đột lịch (tự động)
- Xác nhận tham gia

**Use Cases**: UC-17 (Lập lịch), UC-18 (Quản lý lịch)

---

#### **InterviewPanelController**

**Mô tả**: Quản lý hội đồng phỏng vấn

**Trách nhiệm**:

- Thêm người phỏng vấn
- Xóa người phỏng vấn
- Cập nhật vai trò
- Lấy danh sách hội đồng

---

#### **EvaluationController**

**Mô tả**: Quản lý đánh giá

**Trách nhiệm**:

- Gửi đánh giá
- Cập nhật đánh giá
- Xem đánh giá
- Tính điểm tổng hợp (trung bình các thành viên)
- Xuất báo cáo đánh giá (PDF)

**Use Cases**: UC-19 (Đánh giá), UC-20 (Xem kết quả)

---

#### **InterviewScheduleController**

**Mô tả**: Hỗ trợ lên lịch thông minh

**Trách nhiệm**:

- Tìm khung giờ trống (cho nhiều người)
- Đề xuất thời gian
- Kiểm tra sẵn sàng
- Gửi thông báo lịch

---

### 4.3. Boundary Classes (Lớp Biên)

#### **InterviewForm** (Input Form)

**Thuộc tính**: Hồ sơ, Vòng, Loại, Thời gian, Địa điểm, Người phỏng vấn  
**Trách nhiệm**: Kiểm tra hợp lệ, xung đột

#### **InterviewCalendarView** (Output View)

**Trách nhiệm**: Hiển thị lịch (theo ngày/tuần/người), đánh dấu xung đột

#### **InterviewDetailView** (Output View)

**Trách nhiệm**: Hiển thị thông tin phỏng vấn, hội đồng, đánh giá, lịch sử

#### **EvaluationForm** (Input Form)

**Thuộc tính**: Tiêu chí, Điểm, Nhận xét, Khuyến nghị  
**Trách nhiệm**: Kiểm tra hợp lệ

#### **EmailService** (External Service)

**Trách nhiệm**: Gửi lời mời, thông báo đổi lịch/hủy, nhắc nhở trước phỏng vấn, gửi link video

#### **CalendarIntegration** (External Service)

**Trách nhiệm**: Tạo/cập nhật/xóa sự kiện lịch, kiểm tra khả dụng  
**Công nghệ**: Google Calendar API

#### **VideoConferenceService** (External Service)

**Trách nhiệm**: Tạo phòng họp, tạo link tham gia, kết thúc phòng, ghi lại cuộc họp  
**Công nghệ**: Zoom API / Google Meet

---

## MODULE 5: DECISION & ANALYTICS

**Phạm vi**: UC-21, UC-22, UC-23, UC-25

### 5.1. Entity Classes (Lớp Thực Thể)

#### **RecruitmentResult**

**Mô tả**: Quyết định tuyển dụng cuối cùng

**Thuộc tính**:

- Mã kết quả
- Hồ sơ ứng tuyển
- Quyết định (HIRED, REJECTED, WAITLIST)
- Người quyết định (HR Manager)
- Lý do
- Ngày quyết định
- Ghi chú nội bộ
- Đã thông báo ứng viên

**Trách nhiệm**:

- Có thể thay đổi
- Cập nhật quyết định
- Gửi thông báo

**Ràng buộc**: Chỉ HR Manager/Admin có quyền

---

#### **Offer**

**Mô tả**: Đề nghị làm việc (Job Offer)

**Thuộc tính**:

- Mã đề nghị
- Kết quả tuyển dụng
- Vị trí
- Mức lương đề nghị
- Ngày bắt đầu
- Thời hạn phản hồi
- Trạng thái (PENDING, ACCEPTED, REJECTED, EXPIRED, CANCELLED)
- Ngày phản hồi
- Lý do từ chối

**Trách nhiệm**:

- Kiểm tra hết hạn
- Chấp nhận đề nghị
- Từ chối đề nghị

---

#### **Notification**

**Mô tả**: Thông báo hệ thống

**Thuộc tính**:

- Mã thông báo
- Người nhận
- Loại thông báo (APPLICATION, INTERVIEW, RESULT, SYSTEM)
- Tiêu đề
- Nội dung
- Link liên quan
- Đã đọc
- Thời gian tạo
- Thời gian đọc

**Trách nhiệm**:

- Đánh dấu đã đọc
- Xóa thông báo

---

#### **Report**

**Mô tả**: Báo cáo hệ thống

**Thuộc tính**:

- Mã báo cáo
- Loại báo cáo (RECRUITMENT, PERFORMANCE, COST, CUSTOM)
- Người tạo
- Tham số (JSON - thời gian, bộ lọc)
- Kết quả (JSON)
- Định dạng (PDF, EXCEL, CSV)
- Đường dẫn file
- Thời gian tạo

**Trách nhiệm**:

- Xuất file
- Tải xuống

---

#### **Analytics**

**Mô tả**: Dữ liệu phân tích và thống kê

**Thuộc tính**:

- Mã phân tích
- Khoảng thời gian
- Số tin đăng
- Số ứng viên
- Số phỏng vấn
- Số tuyển dụng
- Thời gian trung bình (time-to-hire)
- Tỷ lệ chuyển đổi (conversion rate)
- Nguồn ứng viên (JSON)

**Trách nhiệm**:

- Tính toán chỉ số

---

### 5.2. Control Classes (Lớp Điều Khiển)

#### **RecruitmentDecisionController**

**Mô tả**: Đưa ra quyết định tuyển dụng

**Trách nhiệm**:

- Đưa ra quyết định
- Cập nhật quyết định
- Xem lịch sử quyết định
- Gửi thông báo ứng viên (email + in-app)
- Xuất danh sách trúng tuyển

**Use Cases**: UC-21 (Quyết định), UC-22 (Thông báo)

---

#### **OfferController**

**Mô tả**: Quản lý đề nghị làm việc

**Trách nhiệm**:

- Tạo đề nghị làm việc
- Gửi đề nghị
- Theo dõi đề nghị
- Xử lý phản hồi
- Hủy đề nghị

---

#### **NotificationController**

**Mô tả**: Quản lý thông báo

**Trách nhiệm**:

- Tạo thông báo
- Gửi thông báo (realtime với WebSocket)
- Lấy danh sách thông báo
- Đánh dấu đã đọc
- Xóa thông báo
- Đếm thông báo chưa đọc

---

#### **ReportController**

**Mô tả**: Tạo và quản lý báo cáo

**Trách nhiệm**:

- Tạo báo cáo
- Xuất báo cáo (PDF/Excel)
- Lấy danh sách báo cáo
- Xóa báo cáo
- Lên lịch báo cáo định kỳ (tuần, tháng, quý)

**Use Cases**: UC-25 (Xuất báo cáo)

---

#### **AnalyticsController**

**Mô tả**: Phân tích và thống kê

**Trách nhiệm**:

- Thống kê tổng quan (KPI dashboard)
- Phân tích hiệu suất tuyển dụng
- Phân tích nguồn ứng viên
- Phân tích thời gian tuyển dụng
- Phân tích chi phí
- Tạo dashboard

**Use Cases**: UC-23 (Xem báo cáo)

---

### 5.3. Boundary Classes (Lớp Biên)

#### **DecisionForm** (Input Form)

**Thuộc tính**: Hồ sơ, Quyết định, Lý do, Ghi chú  
**Trách nhiệm**: Kiểm tra hợp lệ

#### **OfferForm** (Input Form)

**Thuộc tính**: Vị trí, Mức lương, Ngày bắt đầu, Thời hạn phản hồi  
**Trách nhiệm**: Kiểm tra hợp lệ

#### **NotificationListView** (Output View)

**Trách nhiệm**: Hiển thị danh sách, badge số lượng, theo thời gian, phân loại

#### **DashboardView** (Output View)

**Trách nhiệm**: Hiển thị KPI, biểu đồ, thống kê, lọc theo thời gian, xuất dữ liệu

#### **ReportView** (Output View)

**Trách nhiệm**: Chọn loại báo cáo, cấu hình tham số, preview, tải xuống

#### **EmailService** (External Service)

**Trách nhiệm**: Gửi thông báo quyết định, đề nghị làm việc, email từ chối, báo cáo định kỳ

#### **WebSocketService** (External Service - Realtime)

**Trách nhiệm**: Gửi thông báo realtime, cập nhật dashboard realtime, thông báo sự kiện mới  
**Công nghệ**: Django Channels + Redis

#### **ExportService** (External Service)

**Trách nhiệm**: Xuất Excel, PDF, CSV, tạo biểu đồ  
**Công nghệ**: openpyxl, ReportLab, matplotlib

#### **SchedulerService** (External Service)

**Trách nhiệm**: Lên lịch báo cáo, lên lịch thống kê, lên lịch backup, xử lý tác vụ định kỳ  
**Công nghệ**: Celery Beat

---

## TỔNG KẾT THỐNG KÊ

### Phân Bố Theo Loại

| Loại Class    | Số Lượng | Tỷ Lệ    |
| ------------- | -------- | -------- |
| **Entity**    | 25       | 39%      |
| **Control**   | 21       | 33%      |
| **Boundary**  | 18       | 28%      |
| **Tổng cộng** | **64**   | **100%** |

### Phân Bố Theo Module

| Module                          | Entity | Control | Boundary | Tổng   |
| ------------------------------- | ------ | ------- | -------- | ------ |
| Module 1: Authentication & User | 4      | 3       | 4        | 11     |
| Module 2: Job Management        | 4      | 4       | 5        | 13     |
| Module 3: Application & AI      | 4      | 4       | 8        | 16     |
| Module 4: Interview Management  | 4      | 4       | 7        | 15     |
| Module 5: Decision & Analytics  | 5      | 5       | 9        | 19     |
| **Tổng**                        | **25** | **21**  | **18**   | **64** |

### External Services (Tích Hợp Bên Ngoài)

1. **EmailService** - SMTP (Gmail/SendGrid)
2. **GeminiAPIService** - Google Gemini AI
3. **CloudStorageService** - AWS S3 / Google Cloud Storage
4. **CeleryTaskQueue** - Celery + Redis (Async tasks)
5. **CalendarIntegration** - Google Calendar API
6. **VideoConferenceService** - Zoom / Google Meet
7. **WebSocketService** - Django Channels + Redis
8. **ExportService** - openpyxl, ReportLab, matplotlib
9. **SchedulerService** - Celery Beat

---

## KẾT LUẬN

Hệ thống được thiết kế với **64 lớp** phân bố cân đối theo mẫu ECB, đảm bảo:

✅ **Tách biệt trách nhiệm rõ ràng**: Entity-Control-Boundary  
✅ **Tính module hóa cao**: 5 module độc lập, liên kết qua interface  
✅ **Khả năng mở rộng tốt**: Dễ dàng thêm chức năng mới  
✅ **Tích hợp AI thông minh**: Google Gemini cho sàng lọc CV  
✅ **Xử lý bất đồng bộ**: Celery + Redis cho tác vụ nặng  
✅ **Thông báo realtime**: WebSocket cho trải nghiệm tốt

Kiến trúc này phù hợp với yêu cầu hệ thống tuyển dụng quy mô vừa và lớn, có khả năng xử lý hàng nghìn ứng viên đồng thời.
