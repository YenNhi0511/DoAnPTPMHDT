# Use Case - Há»‡ thá»‘ng Tuyá»ƒn dá»¥ng NhÃ¢n sá»±

## 2.1. MÃ´ hÃ¬nh Use Case (Use Case Diagram)

### SÆ¡ Ä‘á»“ tá»•ng quan há»‡ thá»‘ng

```
                                    Há»† THá»NG TUYá»‚N Dá»¤NG NHÃ‚N Sá»°

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                 â”‚
â”‚  CANDIDATE (á»¨ng viÃªn)           RECRUITER (NhÃ  tuyá»ƒn dá»¥ng)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚  â”‚          â”‚                   â”‚          â”‚                                   â”‚
â”‚  â”‚    ğŸ‘¤    â”‚                   â”‚    ğŸ‘¤    â”‚                                   â”‚
â”‚  â”‚          â”‚                   â”‚          â”‚                                   â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚       â”‚                              â”‚                                         â”‚
â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚       â”œâ”€â”€â”‚ ÄÄƒng kÃ½/ÄÄƒng nháº­p  â”‚â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”‚  ÄÄƒng kÃ½/ÄÄƒng nháº­p     â”‚             â”‚
â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚       â”‚                              â”‚                                         â”‚
â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚       â”œâ”€â”€â”‚ Xem tin tuyá»ƒn dá»¥ng â”‚      â”‚  â”‚  ÄÄƒng tin tuyá»ƒn dá»¥ng   â”‚             â”‚
â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚       â”‚                              â”‚                                         â”‚
â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚       â”œâ”€â”€â”‚ TÃ¬m kiáº¿m cÃ´ng viá»‡c â”‚      â”‚  â”‚  Quáº£n lÃ½ tin tuyá»ƒn dá»¥ngâ”‚             â”‚
â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚       â”‚                              â”‚                                         â”‚
â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚       â”œâ”€â”€â”‚ Ná»™p há»“ sÆ¡ á»©ng tuyá»ƒnâ”‚      â”‚  â”‚  Xem há»“ sÆ¡ á»©ng viÃªn    â”‚             â”‚
â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚       â”‚                              â”‚              â”‚                          â”‚
â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚       â”œâ”€â”€â”‚ Xem tráº¡ng thÃ¡i há»“ sÆ¡â”‚     â”‚  â”‚  Má»i phá»ng váº¥n         â”‚             â”‚
â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚       â”‚                              â”‚                                         â”‚
â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚       â”œâ”€â”€â”‚ Xem lá»‹ch phá»ng váº¥n â”‚      â”œâ”€â”€â”‚  Táº¡o lá»‹ch phá»ng váº¥n    â”‚             â”‚
â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚       â”‚                              â”‚                                         â”‚
â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚       â””â”€â”€â”‚ Xem thÃ´ng bÃ¡o      â”‚      â”œâ”€â”€â”‚  Gá»­i káº¿t quáº£ tuyá»ƒn dá»¥ngâ”‚             â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                      â”‚                                         â”‚
â”‚  INTERVIEWER (NgÆ°á»i PV)              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â””â”€â”€â”‚  Xem thá»‘ng kÃª          â”‚             â”‚
â”‚  â”‚          â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚  â”‚    ğŸ‘¤    â”‚                                                                   â”‚
â”‚  â”‚          â”‚                    ADMIN (Quáº£n trá»‹ viÃªn)                         â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚       â”‚                          â”‚          â”‚                                 â”‚
â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    ğŸ‘¤    â”‚                                 â”‚
â”‚       â”œâ”€â”€â”‚ Xem lá»‹ch phá»ng váº¥n â”‚  â”‚          â”‚                                 â”‚
â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚       â”‚                               â”‚                                       â”‚
â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚       â””â”€â”€â”‚ Cháº¥m Ä‘iá»ƒm á»©ng viÃªn â”‚       â”œâ”€â”€â”‚  Quáº£n lÃ½ ngÆ°á»i dÃ¹ng    â”‚           â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                       â”‚                                       â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚          â”‚  AI System (Gemini)â”‚â—„â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”‚  Quáº£n lÃ½ há»‡ thá»‘ng      â”‚           â”‚
â”‚          â”‚                    â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚          â”‚  ğŸ¤– SÃ ng lá»c CV    â”‚       â”‚                                       â”‚
â”‚          â”‚                    â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”‚  Xem bÃ¡o cÃ¡o thá»‘ng kÃª  â”‚           â”‚
â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Má»‘i quan há»‡ giá»¯a cÃ¡c Use Case

**Include (bao gá»“m):**

- `Ná»™p há»“ sÆ¡` **include** `Upload CV`
- `Ná»™p há»“ sÆ¡` **include** `XÃ¡c thá»±c ngÆ°á»i dÃ¹ng`
- `ÄÄƒng tin tuyá»ƒn dá»¥ng` **include** `XÃ¡c thá»±c Recruiter`
- `Táº¡o lá»‹ch phá»ng váº¥n` **include** `Gá»­i email thÃ´ng bÃ¡o`

**Extend (má»Ÿ rá»™ng):**

- `Xem há»“ sÆ¡ á»©ng viÃªn` **extend** `Cháº¡y sÃ ng lá»c AI`
- `Ná»™p há»“ sÆ¡` **extend** `Tá»± Ä‘á»™ng sÃ ng lá»c CV`
- `Cháº¥m Ä‘iá»ƒm á»©ng viÃªn` **extend** `Tá»± Ä‘á»™ng táº¡o káº¿t quáº£ OFFER`

**Generalization (káº¿ thá»«a):**

- `ÄÄƒng kÃ½ Candidate` vÃ  `ÄÄƒng kÃ½ Recruiter` káº¿ thá»«a `ÄÄƒng kÃ½ tÃ i khoáº£n`
- `Xem tin tuyá»ƒn dá»¥ng` Ä‘Æ°á»£c káº¿ thá»«a bá»Ÿi cáº£ Candidate vÃ  Recruiter

---

## 2.2. Danh sÃ¡ch cÃ¡c Actor (TÃ¡c nhÃ¢n)

| STT | Actor                               | MÃ´ táº£                                            | Quyá»n háº¡n                                                                                                                                                               |
| --- | ----------------------------------- | ------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1   | **Candidate (á»¨ng viÃªn)**            | NgÆ°á»i tÃ¬m viá»‡c vÃ  ná»™p há»“ sÆ¡ á»©ng tuyá»ƒn            | - Xem vÃ  tÃ¬m kiáº¿m cÃ´ng viá»‡c<br>- Ná»™p há»“ sÆ¡ á»©ng tuyá»ƒn<br>- Xem tráº¡ng thÃ¡i há»“ sÆ¡<br>- Xem lá»‹ch phá»ng váº¥n<br>- Nháº­n thÃ´ng bÃ¡o vÃ  email                                     |
| 2   | **Recruiter (NhÃ  tuyá»ƒn dá»¥ng)**      | NgÆ°á»i Ä‘áº¡i diá»‡n cÃ´ng ty Ä‘Äƒng tin vÃ  tuyá»ƒn dá»¥ng    | - ÄÄƒng vÃ  quáº£n lÃ½ tin tuyá»ƒn dá»¥ng<br>- Xem vÃ  quáº£n lÃ½ há»“ sÆ¡ á»©ng viÃªn<br>- Má»i phá»ng váº¥n<br>- Táº¡o lá»‹ch phá»ng váº¥n<br>- Gá»­i káº¿t quáº£ tuyá»ƒn dá»¥ng<br>- Xem thá»‘ng kÃª tuyá»ƒn dá»¥ng |
| 3   | **Interviewer (NgÆ°á»i phá»ng váº¥n)**   | NgÆ°á»i Ä‘Æ°á»£c gÃ¡n Ä‘á»ƒ phá»ng váº¥n vÃ  Ä‘Ã¡nh giÃ¡ á»©ng viÃªn | - Xem lá»‹ch phá»ng váº¥n Ä‘Æ°á»£c gÃ¡n<br>- Xem thÃ´ng tin á»©ng viÃªn<br>- Cháº¥m Ä‘iá»ƒm vÃ  nháº­p feedback<br>- Cáº­p nháº­t káº¿t quáº£ phá»ng váº¥n                                               |
| 4   | **Admin (Quáº£n trá»‹ viÃªn)**           | NgÆ°á»i quáº£n lÃ½ toÃ n bá»™ há»‡ thá»‘ng                   | - Quáº£n lÃ½ táº¥t cáº£ ngÆ°á»i dÃ¹ng<br>- Quáº£n lÃ½ táº¥t cáº£ tin tuyá»ƒn dá»¥ng<br>- Xem dashboard tá»•ng quan<br>- Xuáº¥t bÃ¡o cÃ¡o thá»‘ng kÃª<br>- Xem log há»‡ thá»‘ng<br>- Quyá»n cao nháº¥t        |
| 5   | **AI System (Google Gemini)**       | Há»‡ thá»‘ng AI tá»± Ä‘á»™ng sÃ ng lá»c CV                  | - PhÃ¢n tÃ­ch CV tá»± Ä‘á»™ng<br>- Cháº¥m Ä‘iá»ƒm Ä‘á»™ phÃ¹ há»£p<br>- Táº¡o bÃ¡o cÃ¡o sÃ ng lá»c                                                                                              |
| 6   | **Email Service (Resend/SendGrid)** | Dá»‹ch vá»¥ gá»­i email tá»± Ä‘á»™ng                        | - Gá»­i email xÃ¡c thá»±c<br>- Gá»­i email thÃ´ng bÃ¡o<br>- Gá»­i email káº¿t quáº£                                                                                                    |
| 7   | **Database System**                 | Há»‡ thá»‘ng lÆ°u trá»¯ dá»¯ liá»‡u (PostgreSQL)            | - LÆ°u trá»¯ vÃ  truy xuáº¥t dá»¯ liá»‡u<br>- Äáº£m báº£o tÃ­nh toÃ n váº¹n                                                                                                               |

---

## 2.3. Danh sÃ¡ch cÃ¡c Use Case

### NhÃ³m 1: Quáº£n lÃ½ TÃ i khoáº£n vÃ  XÃ¡c thá»±c (4 UC)

| MÃ£ UC | TÃªn Use Case          | Actor                | MÃ´ táº£ ngáº¯n                                      | Äá»™ Æ°u tiÃªn |
| ----- | --------------------- | -------------------- | ----------------------------------------------- | ---------- |
| UC-01 | ÄÄƒng kÃ½ vÃ  xÃ¡c thá»±c   | Candidate, Recruiter | ÄÄƒng kÃ½ tÃ i khoáº£n má»›i vÃ  xÃ¡c thá»±c báº±ng OTP      | Cao        |
| UC-02 | ÄÄƒng nháº­p             | Táº¥t cáº£               | ÄÄƒng nháº­p vÃ o há»‡ thá»‘ng báº±ng email vÃ  máº­t kháº©u   | Cao        |
| UC-03 | ÄÄƒng xuáº¥t             | Táº¥t cáº£               | ÄÄƒng xuáº¥t khá»i há»‡ thá»‘ng                         | Cao        |
| UC-04 | Quáº£n lÃ½ há»“ sÆ¡ cÃ¡ nhÃ¢n | Táº¥t cáº£               | Xem, cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n vÃ  Ä‘á»•i máº­t kháº©u | Trung bÃ¬nh |

### NhÃ³m 2: Quáº£n lÃ½ Tin tuyá»ƒn dá»¥ng (5 UC)

| MÃ£ UC | TÃªn Use Case              | Actor                | MÃ´ táº£ ngáº¯n                                    | Äá»™ Æ°u tiÃªn |
| ----- | ------------------------- | -------------------- | --------------------------------------------- | ---------- |
| UC-05 | ÄÄƒng tin tuyá»ƒn dá»¥ng       | Recruiter            | Táº¡o tin tuyá»ƒn dá»¥ng má»›i vá»›i Ä‘áº§y Ä‘á»§ thÃ´ng tin   | Cao        |
| UC-06 | Xem vÃ  tÃ¬m kiáº¿m cÃ´ng viá»‡c | Candidate, Recruiter | Xem danh sÃ¡ch, tÃ¬m kiáº¿m vÃ  lá»c tin tuyá»ƒn dá»¥ng | Cao        |
| UC-07 | Xem chi tiáº¿t cÃ´ng viá»‡c    | Candidate, Recruiter | Xem thÃ´ng tin chi tiáº¿t má»™t tin tuyá»ƒn dá»¥ng     | Cao        |
| UC-08 | Chá»‰nh sá»­a tin tuyá»ƒn dá»¥ng  | Recruiter            | Cáº­p nháº­t thÃ´ng tin tin tuyá»ƒn dá»¥ng             | Trung bÃ¬nh |
| UC-09 | Quáº£n lÃ½ tráº¡ng thÃ¡i tin    | Recruiter            | ÄÃ³ng/Má»Ÿ/XÃ³a tin tuyá»ƒn dá»¥ng                    | Trung bÃ¬nh |

### NhÃ³m 3: Quáº£n lÃ½ á»¨ng tuyá»ƒn (5 UC)

| MÃ£ UC | TÃªn Use Case           | Actor                | MÃ´ táº£ ngáº¯n                                         | Äá»™ Æ°u tiÃªn |
| ----- | ---------------------- | -------------------- | -------------------------------------------------- | ---------- |
| UC-10 | Ná»™p há»“ sÆ¡ á»©ng tuyá»ƒn    | Candidate            | Upload CV vÃ  thÃ´ng tin Ä‘á»ƒ á»©ng tuyá»ƒn                | Cao        |
| UC-11 | Xem há»“ sÆ¡ Ä‘Ã£ ná»™p       | Candidate            | Xem lá»‹ch sá»­ vÃ  tráº¡ng thÃ¡i táº¥t cáº£ há»“ sÆ¡ Ä‘Ã£ ná»™p      | Cao        |
| UC-12 | Xem danh sÃ¡ch á»©ng viÃªn | Recruiter            | Xem, lá»c, sáº¯p xáº¿p há»“ sÆ¡ á»©ng tuyá»ƒn vÃ o tin cá»§a mÃ¬nh | Cao        |
| UC-13 | Xem chi tiáº¿t há»“ sÆ¡     | Candidate, Recruiter | Xem thÃ´ng tin chi tiáº¿t há»“ sÆ¡ vÃ  táº£i CV             | Cao        |
| UC-14 | RÃºt há»“ sÆ¡ á»©ng tuyá»ƒn    | Candidate            | Há»§y há»“ sÆ¡ Ä‘Ã£ ná»™p (náº¿u chÆ°a qua phá»ng váº¥n)          | Tháº¥p       |

### NhÃ³m 4: SÃ ng lá»c AI (2 UC)

| MÃ£ UC | TÃªn Use Case                | Actor     | MÃ´ táº£ ngáº¯n                                        | Äá»™ Æ°u tiÃªn |
| ----- | --------------------------- | --------- | ------------------------------------------------- | ---------- |
| UC-15 | Tá»± Ä‘á»™ng sÃ ng lá»c CV báº±ng AI | AI System | AI tá»± Ä‘á»™ng phÃ¢n tÃ­ch, cháº¥m Ä‘iá»ƒm vÃ  Ä‘Ã¡nh giÃ¡ CV    | Cao        |
| UC-16 | Xem káº¿t quáº£ sÃ ng lá»c AI     | Recruiter | Xem Ä‘iá»ƒm, phÃ¢n tÃ­ch chi tiáº¿t vÃ  cháº¡y láº¡i sÃ ng lá»c | Cao        |

### NhÃ³m 5: Quáº£n lÃ½ Phá»ng váº¥n (4 UC)

| MÃ£ UC | TÃªn Use Case                | Actor                  | MÃ´ táº£ ngáº¯n                                    | Äá»™ Æ°u tiÃªn |
| ----- | --------------------------- | ---------------------- | --------------------------------------------- | ---------- |
| UC-17 | Táº¡o vÃ  má»i phá»ng váº¥n        | Recruiter              | Táº¡o lá»‹ch phá»ng váº¥n vÃ  gá»­i email má»i á»©ng viÃªn  | Cao        |
| UC-18 | Xem lá»‹ch phá»ng váº¥n          | Candidate, Interviewer | Xem danh sÃ¡ch cÃ¡c buá»•i phá»ng váº¥n cá»§a mÃ¬nh     | Cao        |
| UC-19 | ÄÃ¡nh giÃ¡ phá»ng váº¥n          | Interviewer            | Cháº¥m Ä‘iá»ƒm, nháº­p feedback vÃ  cáº­p nháº­t káº¿t quáº£  | Cao        |
| UC-20 | Gá»­i email káº¿t quáº£ phá»ng váº¥n | Há»‡ thá»‘ng               | Tá»± Ä‘á»™ng gá»­i email thÃ´ng bÃ¡o káº¿t quáº£ phá»ng váº¥n | Cao        |

### NhÃ³m 6: Quáº£n lÃ½ Káº¿t quáº£ Tuyá»ƒn dá»¥ng (2 UC)

| MÃ£ UC | TÃªn Use Case                  | Actor               | MÃ´ táº£ ngáº¯n                                       | Äá»™ Æ°u tiÃªn |
| ----- | ----------------------------- | ------------------- | ------------------------------------------------ | ---------- |
| UC-21 | Táº¡o vÃ  gá»­i káº¿t quáº£ tuyá»ƒn dá»¥ng | Recruiter, Há»‡ thá»‘ng | Táº¡o quyáº¿t Ä‘á»‹nh OFFER/REJECT vÃ  gá»­i email tá»± Ä‘á»™ng | Cao        |
| UC-22 | Xem lá»‹ch sá»­ quyáº¿t Ä‘á»‹nh        | Recruiter, Admin    | Xem lá»‹ch sá»­ táº¥t cáº£ quyáº¿t Ä‘á»‹nh tuyá»ƒn dá»¥ng         | Trung bÃ¬nh |

### NhÃ³m 7: ThÃ´ng bÃ¡o (1 UC)

| MÃ£ UC | TÃªn Use Case       | Actor  | MÃ´ táº£ ngáº¯n                                              | Äá»™ Æ°u tiÃªn |
| ----- | ------------------ | ------ | ------------------------------------------------------- | ---------- |
| UC-23 | Há»‡ thá»‘ng thÃ´ng bÃ¡o | Táº¥t cáº£ | Xem, Ä‘Ã¡nh dáº¥u Ä‘Ã£ Ä‘á»c vÃ  nháº­n thÃ´ng bÃ¡o qua email/in-app | Cao        |

### NhÃ³m 8: Quáº£n trá»‹ Há»‡ thá»‘ng (2 UC)

| MÃ£ UC | TÃªn Use Case         | Admin | MÃ´ táº£ ngáº¯n                                         | Äá»™ Æ°u tiÃªn |
| ----- | -------------------- | ----- | -------------------------------------------------- | ---------- |
| UC-24 | Quáº£n lÃ½ ngÆ°á»i dÃ¹ng   | Admin | Xem, chá»‰nh sá»­a, khÃ³a/má»Ÿ khÃ³a ngÆ°á»i dÃ¹ng vÃ  cÃ´ng ty | Cao        |
| UC-25 | Dashboard vÃ  bÃ¡o cÃ¡o | Admin | Xem dashboard thá»‘ng kÃª vÃ  xuáº¥t bÃ¡o cÃ¡o há»‡ thá»‘ng    | Trung bÃ¬nh |

**Tá»•ng sá»‘ Use Case:** 25

### Ghi chÃº vá» viá»‡c rÃºt gá»n:

**ÄÃ£ gá»™p cÃ¡c UC tÆ°Æ¡ng tá»±:**

- UC-01 = ÄÄƒng kÃ½ + XÃ¡c thá»±c OTP (cÅ©: UC-01, UC-02)
- UC-04 = Quáº£n lÃ½ há»“ sÆ¡ + Äá»•i máº­t kháº©u (cÅ©: UC-05, UC-06)
- UC-06 = Xem danh sÃ¡ch + TÃ¬m kiáº¿m (cÅ©: UC-08, UC-09)
- UC-09 = ÄÃ³ng/Má»Ÿ/XÃ³a tin (cÅ©: UC-12, UC-13)
- UC-12 = Xem danh sÃ¡ch + Lá»c/Sáº¯p xáº¿p + Táº£i CV (cÅ©: UC-18, UC-19, UC-20)
- UC-15 = SÃ ng lá»c AI tá»± Ä‘á»™ng (cÅ©: UC-21)
- UC-16 = Xem káº¿t quáº£ + Cháº¡y láº¡i AI (cÅ©: UC-22, UC-23)
- UC-17 = Táº¡o lá»‹ch + Má»i PV (cÅ©: UC-24, UC-25)
- UC-19 = Cháº¥m Ä‘iá»ƒm + Cáº­p nháº­t káº¿t quáº£ (cÅ©: UC-27, UC-28)
- UC-21 = Táº¡o káº¿t quáº£ + Gá»­i email (cÅ©: UC-30, UC-31)
- UC-23 = Xem + ÄÃ¡nh dáº¥u + Email thÃ´ng bÃ¡o (cÅ©: UC-33, UC-34, UC-35)
- UC-24 = Quáº£n lÃ½ user + Quáº£n lÃ½ cÃ´ng ty (cÅ©: UC-36, UC-37)
- UC-25 = Dashboard + Xuáº¥t bÃ¡o cÃ¡o (cÅ©: UC-38, UC-39)

**ÄÃ£ loáº¡i bá»:**

- UC-40 (Xem log há»‡ thá»‘ng) - Ãt quan trá»ng cho Ä‘á»“ Ã¡n

---

## 2.4. Äáº·c táº£ Use Case (Use Case Specification)

### UC-01: ÄÄƒng kÃ½ vÃ  xÃ¡c thá»±c tÃ i khoáº£n

**MÃ´ táº£:** NgÆ°á»i dÃ¹ng táº¡o tÃ i khoáº£n má»›i Ä‘á»ƒ sá»­ dá»¥ng há»‡ thá»‘ng

**Actor chÃ­nh:** Candidate, Recruiter

**Actor phá»¥:** Email Service

**Tiá»n Ä‘iá»u kiá»‡n:**

- NgÆ°á»i dÃ¹ng chÆ°a cÃ³ tÃ i khoáº£n
- Email chÆ°a Ä‘Æ°á»£c Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng

**Háº­u Ä‘iá»u kiá»‡n:**

- TÃ i khoáº£n má»›i Ä‘Æ°á»£c táº¡o vá»›i tráº¡ng thÃ¡i "chÆ°a xÃ¡c thá»±c"
- MÃ£ OTP Ä‘Æ°á»£c gá»­i qua email

**Luá»“ng sá»± kiá»‡n chÃ­nh:**

1. NgÆ°á»i dÃ¹ng truy cáº­p trang Ä‘Äƒng kÃ½
2. NgÆ°á»i dÃ¹ng chá»n vai trÃ² (Candidate/Recruiter)
3. NgÆ°á»i dÃ¹ng nháº­p thÃ´ng tin:
   - Email
   - Máº­t kháº©u (tá»‘i thiá»ƒu 8 kÃ½ tá»±)
   - Há» tÃªn
   - Sá»‘ Ä‘iá»‡n thoáº¡i
   - [Náº¿u Recruiter] TÃªn cÃ´ng ty
4. Há»‡ thá»‘ng validate dá»¯ liá»‡u nháº­p vÃ o
5. Há»‡ thá»‘ng kiá»ƒm tra email chÆ°a tá»“n táº¡i
6. Há»‡ thá»‘ng hash máº­t kháº©u báº±ng bcrypt
7. Há»‡ thá»‘ng táº¡o tÃ i khoáº£n má»›i vá»›i tráº¡ng thÃ¡i `is_active=False`
8. Há»‡ thá»‘ng generate mÃ£ OTP 6 chá»¯ sá»‘ ngáº«u nhiÃªn
9. Há»‡ thá»‘ng lÆ°u OTP vÃ o database vá»›i thá»i gian háº¿t háº¡n 10 phÃºt
10. Há»‡ thá»‘ng gá»­i email chá»©a mÃ£ OTP Ä‘áº¿n Ä‘á»‹a chá»‰ email Ä‘Ã£ Ä‘Äƒng kÃ½
11. Há»‡ thá»‘ng chuyá»ƒn ngÆ°á»i dÃ¹ng Ä‘áº¿n trang xÃ¡c thá»±c OTP
12. Hiá»ƒn thá»‹ thÃ´ng bÃ¡o "Vui lÃ²ng kiá»ƒm tra email Ä‘á»ƒ láº¥y mÃ£ OTP"

**Luá»“ng sá»± kiá»‡n phá»¥:**

**3a. Email Ä‘Ã£ tá»“n táº¡i:**

- 3a1. Há»‡ thá»‘ng hiá»ƒn thá»‹ lá»—i "Email Ä‘Ã£ Ä‘Æ°á»£c Ä‘Äƒng kÃ½"
- 3a2. Quay láº¡i bÆ°á»›c 3

**4a. Dá»¯ liá»‡u khÃ´ng há»£p lá»‡:**

- 4a1. Há»‡ thá»‘ng hiá»ƒn thá»‹ lá»—i validation cá»¥ thá»ƒ
- 4a2. Quay láº¡i bÆ°á»›c 3

**10a. Gá»­i email tháº¥t báº¡i:**

- 10a1. Há»‡ thá»‘ng thá»­ gá»­i láº¡i qua SendGrid (fallback)
- 10a2. Náº¿u váº«n lá»—i, hiá»ƒn thá»‹ mÃ£ OTP trÃªn mÃ n hÃ¬nh
- 10a3. Tiáº¿p tá»¥c bÆ°á»›c 11

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- Máº­t kháº©u pháº£i Ä‘Æ°á»£c hash trÆ°á»›c khi lÆ°u
- OTP pháº£i random vÃ  unique
- Rate limit: tá»‘i Ä‘a 5 láº§n Ä‘Äƒng kÃ½/IP trong 1 giá»

**Táº§n suáº¥t sá»­ dá»¥ng:** Cao (hÃ ng ngÃ y)

---

### UC-02: XÃ¡c thá»±c OTP

**MÃ´ táº£:** NgÆ°á»i dÃ¹ng nháº­p mÃ£ OTP Ä‘á»ƒ kÃ­ch hoáº¡t tÃ i khoáº£n sau khi Ä‘Äƒng kÃ½

**Actor chÃ­nh:** Candidate, Recruiter

**Actor phá»¥:** Email Service

**Tiá»n Ä‘iá»u kiá»‡n:**

- NgÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Äƒng kÃ½ tÃ i khoáº£n (UC-01)
- MÃ£ OTP Ä‘Ã£ Ä‘Æ°á»£c gá»­i qua email
- OTP chÆ°a háº¿t háº¡n (10 phÃºt)

**Háº­u Ä‘iá»u kiá»‡n:**

- TÃ i khoáº£n Ä‘Æ°á»£c kÃ­ch hoáº¡t (is_active=True)
- NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ Ä‘Äƒng nháº­p

**Luá»“ng sá»± kiá»‡n chÃ­nh:**

1. NgÆ°á»i dÃ¹ng truy cáº­p trang xÃ¡c thá»±c OTP
2. Há»‡ thá»‘ng hiá»ƒn thá»‹ form nháº­p OTP
3. NgÆ°á»i dÃ¹ng nháº­p mÃ£ OTP 6 chá»¯ sá»‘
4. Há»‡ thá»‘ng validate OTP
5. Há»‡ thá»‘ng kiá»ƒm tra OTP khá»›p vá»›i database
6. Há»‡ thá»‘ng kiá»ƒm tra OTP chÆ°a háº¿t háº¡n
7. Há»‡ thá»‘ng kiá»ƒm tra sá»‘ láº§n thá»­ khÃ´ng vÆ°á»£t quÃ¡ 5
8. Há»‡ thá»‘ng cáº­p nháº­t user.is_active = True
9. Há»‡ thá»‘ng xÃ³a OTP khá»i database
10. Há»‡ thá»‘ng tá»± Ä‘á»™ng Ä‘Äƒng nháº­p user (táº¡o JWT token)
11. Há»‡ thá»‘ng chuyá»ƒn Ä‘áº¿n dashboard tÆ°Æ¡ng á»©ng vai trÃ²
12. Hiá»ƒn thá»‹ thÃ´ng bÃ¡o "XÃ¡c thá»±c thÃ nh cÃ´ng!"

**Luá»“ng sá»± kiá»‡n phá»¥:**

**3a. NgÆ°á»i dÃ¹ng khÃ´ng nháº­n Ä‘Æ°á»£c email:**

- 3a1. Click "Gá»­i láº¡i mÃ£ OTP"
- 3a2. Há»‡ thá»‘ng generate OTP má»›i
- 3a3. Gá»­i email má»›i
- 3a4. Reset sá»‘ láº§n thá»­ vá» 0
- 3a5. Quay láº¡i bÆ°á»›c 2

**5a. OTP khÃ´ng Ä‘Ãºng:**

- 5a1. TÄƒng sá»‘ láº§n thá»­ lÃªn 1
- 5a2. Hiá»ƒn thá»‹ "MÃ£ OTP khÃ´ng Ä‘Ãºng. CÃ²n X láº§n thá»­"
- 5a3. Quay láº¡i bÆ°á»›c 3

**6a. OTP Ä‘Ã£ háº¿t háº¡n:**

- 6a1. Hiá»ƒn thá»‹ "MÃ£ OTP Ä‘Ã£ háº¿t háº¡n"
- 6a2. Hiá»ƒn thá»‹ nÃºt "Gá»­i láº¡i mÃ£ OTP"
- 6a3. Chuyá»ƒn Ä‘áº¿n luá»“ng 3a

**7a. VÆ°á»£t quÃ¡ 5 láº§n thá»­:**

- 7a1. KhÃ³a táº¡m thá»i 15 phÃºt
- 7a2. Hiá»ƒn thá»‹ "Báº¡n Ä‘Ã£ nháº­p sai quÃ¡ nhiá»u láº§n. Vui lÃ²ng thá»­ láº¡i sau 15 phÃºt"
- 7a3. Káº¿t thÃºc use case

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- OTP pháº£i expire sau 10 phÃºt
- Giá»›i háº¡n 5 láº§n thá»­ sai
- Rate limit: tá»‘i Ä‘a 3 láº§n gá»­i láº¡i OTP trong 1 giá»
- Log má»—i láº§n nháº­p OTP (audit)

**Táº§n suáº¥t sá»­ dá»¥ng:** Cao

---

### UC-03: ÄÄƒng nháº­p

**MÃ´ táº£:** NgÆ°á»i dÃ¹ng Ä‘Äƒng nháº­p vÃ o há»‡ thá»‘ng

**Actor chÃ­nh:** Candidate, Recruiter, Interviewer, Admin

**Tiá»n Ä‘iá»u kiá»‡n:**

- NgÆ°á»i dÃ¹ng Ä‘Ã£ cÃ³ tÃ i khoáº£n Ä‘Ã£ xÃ¡c thá»±c
- TÃ i khoáº£n khÃ´ng bá»‹ khÃ³a

**Háº­u Ä‘iá»u kiá»‡n:**

- NgÆ°á»i dÃ¹ng Ä‘Äƒng nháº­p thÃ nh cÃ´ng
- JWT token Ä‘Æ°á»£c cáº¥p

**Luá»“ng sá»± kiá»‡n chÃ­nh:**

1. NgÆ°á»i dÃ¹ng truy cáº­p trang Ä‘Äƒng nháº­p
2. NgÆ°á»i dÃ¹ng nháº­p email vÃ  máº­t kháº©u
3. Há»‡ thá»‘ng validate dá»¯ liá»‡u
4. Há»‡ thá»‘ng tÃ¬m user theo email
5. Há»‡ thá»‘ng verify máº­t kháº©u vá»›i hash trong database
6. Há»‡ thá»‘ng kiá»ƒm tra tÃ i khoáº£n Ä‘Ã£ xÃ¡c thá»±c (`is_active=True`)
7. Há»‡ thá»‘ng kiá»ƒm tra tÃ i khoáº£n khÃ´ng bá»‹ khÃ³a
8. Há»‡ thá»‘ng táº¡o JWT access token (háº¿t háº¡n 24h)
9. Há»‡ thá»‘ng táº¡o JWT refresh token (háº¿t háº¡n 7 ngÃ y)
10. Há»‡ thá»‘ng tráº£ vá» tokens vÃ  thÃ´ng tin user
11. Frontend lÆ°u tokens vÃ o localStorage
12. Há»‡ thá»‘ng chuyá»ƒn user Ä‘áº¿n trang dashboard tÆ°Æ¡ng á»©ng vai trÃ²
13. Hiá»ƒn thá»‹ thÃ´ng bÃ¡o "ÄÄƒng nháº­p thÃ nh cÃ´ng"

**Luá»“ng sá»± kiá»‡n phá»¥:**

**4a. Email khÃ´ng tá»“n táº¡i:**

- 4a1. Há»‡ thá»‘ng hiá»ƒn thá»‹ "Email hoáº·c máº­t kháº©u khÃ´ng Ä‘Ãºng"
- 4a2. Quay láº¡i bÆ°á»›c 2

**5a. Máº­t kháº©u sai:**

- 5a1. Há»‡ thá»‘ng tÄƒng sá»‘ láº§n Ä‘Äƒng nháº­p sai
- 5a2. Há»‡ thá»‘ng hiá»ƒn thá»‹ "Email hoáº·c máº­t kháº©u khÃ´ng Ä‘Ãºng"
- 5a3. Náº¿u sai 5 láº§n, khÃ³a tÃ i khoáº£n 15 phÃºt
- 5a4. Quay láº¡i bÆ°á»›c 2

**6a. TÃ i khoáº£n chÆ°a xÃ¡c thá»±c:**

- 6a1. Há»‡ thá»‘ng hiá»ƒn thá»‹ "TÃ i khoáº£n chÆ°a Ä‘Æ°á»£c xÃ¡c thá»±c"
- 6a2. Hiá»ƒn thá»‹ nÃºt "Gá»­i láº¡i mÃ£ OTP"
- 6a3. Chuyá»ƒn Ä‘áº¿n UC-02

**7a. TÃ i khoáº£n bá»‹ khÃ³a:**

- 7a1. Há»‡ thá»‘ng hiá»ƒn thá»‹ "TÃ i khoáº£n Ä‘Ã£ bá»‹ khÃ³a. Vui lÃ²ng liÃªn há»‡ admin"
- 7a2. Káº¿t thÃºc use case

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- KhÃ´ng hiá»ƒn thá»‹ cá»¥ thá»ƒ email hay password sai (báº£o máº­t)
- Rate limit: 5 láº§n Ä‘Äƒng nháº­p sai â†’ khÃ³a 15 phÃºt
- JWT pháº£i Ä‘Æ°á»£c sign vá»›i secret key máº¡nh

**Táº§n suáº¥t sá»­ dá»¥ng:** Ráº¥t cao (nhiá»u láº§n/ngÃ y)

---

### UC-14: Ná»™p há»“ sÆ¡ á»©ng tuyá»ƒn

**MÃ´ táº£:** Candidate upload CV vÃ  ná»™p há»“ sÆ¡ á»©ng tuyá»ƒn vÃ o má»™t tin tuyá»ƒn dá»¥ng

**Actor chÃ­nh:** Candidate

**Actor phá»¥:** AI System, Email Service

**Tiá»n Ä‘iá»u kiá»‡n:**

- Candidate Ä‘Ã£ Ä‘Äƒng nháº­p
- Tin tuyá»ƒn dá»¥ng á»Ÿ tráº¡ng thÃ¡i ACTIVE
- Candidate chÆ°a ná»™p há»“ sÆ¡ vÃ o tin nÃ y

**Háº­u Ä‘iá»u kiá»‡n:**

- Há»“ sÆ¡ á»©ng tuyá»ƒn Ä‘Æ°á»£c táº¡o vá»›i tráº¡ng thÃ¡i PENDING
- CV Ä‘Æ°á»£c lÆ°u vÃ o server
- AI tá»± Ä‘á»™ng sÃ ng lá»c CV (background task)
- Email xÃ¡c nháº­n Ä‘Æ°á»£c gá»­i

**Luá»“ng sá»± kiá»‡n chÃ­nh:**

1. Candidate truy cáº­p trang chi tiáº¿t tin tuyá»ƒn dá»¥ng
2. Candidate click nÃºt "á»¨ng tuyá»ƒn ngay"
3. Há»‡ thá»‘ng hiá»ƒn thá»‹ form á»©ng tuyá»ƒn
4. Candidate Ä‘iá»n thÃ´ng tin:
   - Upload file CV (PDF/DOCX, max 10MB)
   - ThÆ° giá»›i thiá»‡u (tÃ¹y chá»n)
   - Sá»‘ Ä‘iá»‡n thoáº¡i liÃªn há»‡
   - Email liÃªn há»‡ (tá»± Ä‘á»™ng Ä‘iá»n tá»« profile)
5. Há»‡ thá»‘ng validate file CV (Ä‘á»‹nh dáº¡ng, kÃ­ch thÆ°á»›c)
6. Há»‡ thá»‘ng upload file CV lÃªn server
7. Há»‡ thá»‘ng Ä‘á»•i tÃªn file CV thÃ nh UUID (báº£o máº­t)
8. Há»‡ thá»‘ng trÃ­ch xuáº¥t text tá»« CV (PyPDF2/python-docx)
9. Há»‡ thá»‘ng táº¡o record Application má»›i:
   - candidate_id
   - job_id
   - cv_file_path
   - cv_text
   - cover_letter
   - status = PENDING
   - created_at = now()
10. Há»‡ thá»‘ng lÆ°u Application vÃ o database
11. Há»‡ thá»‘ng táº¡o Celery task Ä‘á»ƒ AI sÃ ng lá»c CV
12. Há»‡ thá»‘ng gá»­i email xÃ¡c nháº­n Ä‘Ã£ nháº­n há»“ sÆ¡
13. Há»‡ thá»‘ng táº¡o notification cho Candidate
14. Há»‡ thá»‘ng táº¡o notification cho Recruiter cá»§a tin tuyá»ƒn dá»¥ng
15. Há»‡ thá»‘ng chuyá»ƒn vá» trang "Há»“ sÆ¡ cá»§a tÃ´i"
16. Hiá»ƒn thá»‹ thÃ´ng bÃ¡o "Ná»™p há»“ sÆ¡ thÃ nh cÃ´ng! Vui lÃ²ng chá» káº¿t quáº£ sÃ ng lá»c"

**Luá»“ng sá»± kiá»‡n phá»¥:**

**4a. Candidate Ä‘Ã£ ná»™p há»“ sÆ¡ vÃ o tin nÃ y:**

- 4a1. Há»‡ thá»‘ng hiá»ƒn thá»‹ "Báº¡n Ä‘Ã£ ná»™p há»“ sÆ¡ vÃ o tin nÃ y"
- 4a2. Hiá»ƒn thá»‹ thÃ´ng tin há»“ sÆ¡ Ä‘Ã£ ná»™p
- 4a3. Káº¿t thÃºc use case

**5a. File khÃ´ng há»£p lá»‡:**

- 5a1. Há»‡ thá»‘ng hiá»ƒn thá»‹ lá»—i cá»¥ thá»ƒ:
  - "File pháº£i lÃ  PDF hoáº·c DOCX"
  - "File khÃ´ng Ä‘Æ°á»£c vÆ°á»£t quÃ¡ 10MB"
- 5a2. Quay láº¡i bÆ°á»›c 4

**8a. KhÃ´ng thá»ƒ trÃ­ch xuáº¥t text tá»« CV:**

- 8a1. Há»‡ thá»‘ng lÆ°u cv_text = ""
- 8a2. Log cáº£nh bÃ¡o
- 8a3. Tiáº¿p tá»¥c bÆ°á»›c 9

**11a. Background task (AI sÃ ng lá»c):**

- Task cháº¡y báº¥t Ä‘á»“ng bá»™ (khÃ´ng block)
- Khi task hoÃ n thÃ nh:
  - Cáº­p nháº­t Application.status = SCREENING
  - LÆ°u Ä‘iá»ƒm AI vÃ o Application.ai_score
  - LÆ°u phÃ¢n tÃ­ch vÃ o Application.ai_analysis
  - Gá»­i email káº¿t quáº£ sÃ ng lá»c cho Candidate vÃ  Recruiter
  - Táº¡o notification

**12a. Gá»­i email tháº¥t báº¡i:**

- 12a1. Thá»­ gá»­i qua SendGrid (fallback)
- 12a2. Náº¿u váº«n lá»—i, lÆ°u email vÃ o queue
- 12a3. Tiáº¿p tá»¥c bÆ°á»›c 13

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- File CV pháº£i Ä‘Æ°á»£c scan virus trÆ°á»›c khi lÆ°u
- CV pháº£i Ä‘Æ°á»£c lÆ°u vá»›i tÃªn file unique (UUID)
- AI screening khÃ´ng Ä‘Æ°á»£c block form submission
- Pháº£i cÃ³ progress bar khi upload file

**Táº§n suáº¥t sá»­ dá»¥ng:** Ráº¥t cao

---

### UC-21: Tá»± Ä‘á»™ng sÃ ng lá»c CV

**MÃ´ táº£:** Há»‡ thá»‘ng AI tá»± Ä‘á»™ng phÃ¢n tÃ­ch CV vÃ  Ä‘Ã¡nh giÃ¡ Ä‘á»™ phÃ¹ há»£p vá»›i yÃªu cáº§u cÃ´ng viá»‡c

**Actor chÃ­nh:** AI System (Google Gemini)

**Actor phá»¥:** Email Service

**Tiá»n Ä‘iá»u kiá»‡n:**

- CÃ³ Application má»›i vá»›i cv_text Ä‘Ã£ Ä‘Æ°á»£c trÃ­ch xuáº¥t
- Job cÃ³ Ä‘áº§y Ä‘á»§ description vÃ  requirements

**Háº­u Ä‘iá»u kiá»‡n:**

- Application cÃ³ ai_score (0-100)
- Application cÃ³ ai_analysis (JSON)
- Status Ä‘Æ°á»£c update thÃ nh SCREENING
- Email káº¿t quáº£ Ä‘Æ°á»£c gá»­i

**Luá»“ng sá»± kiá»‡n chÃ­nh:**

1. Celery worker nháº­n task `screen_cv_with_ai(application_id)`
2. Worker load Application tá»« database
3. Worker load Job tÆ°Æ¡ng á»©ng
4. Worker chuáº©n bá»‹ prompt cho Gemini AI:

   ```
   Job Title: {job.title}
   Requirements: {job.requirements}
   Description: {job.description}

   CV Content: {application.cv_text}

   Task: PhÃ¢n tÃ­ch CV vÃ  Ä‘Ã¡nh giÃ¡ Ä‘á»™ phÃ¹ há»£p vá»›i cÃ´ng viá»‡c.
   Tráº£ vá» JSON format:
   {
     "score": 0-100,
     "strengths": ["..."],
     "weaknesses": ["..."],
     "skill_match": {
       "matched_skills": ["..."],
       "missing_skills": ["..."]
     },
     "experience_match": "...",
     "education_match": "...",
     "recommendation": "..."
   }
   ```

5. Worker gá»i Google Gemini API
6. Worker nháº­n response tá»« Gemini
7. Worker parse JSON response
8. Worker validate dá»¯ liá»‡u tráº£ vá»
9. Worker cáº­p nháº­t Application:
   - ai_score = response['score']
   - ai_analysis = response (JSON)
   - status = SCREENING
   - ai_screened_at = now()
10. Worker lÆ°u vÃ o database
11. Worker gá»­i email káº¿t quáº£ sÃ ng lá»c Ä‘áº¿n Candidate:
    - Subject: "Káº¿t quáº£ sÃ ng lá»c CV - {job.title}"
    - Body: Äiá»ƒm sá»‘, nháº­n xÃ©t tá»•ng quan
12. Worker gá»­i email thÃ´ng bÃ¡o Ä‘áº¿n Recruiter:
    - Subject: "CÃ³ há»“ sÆ¡ má»›i - {candidate.name} - Äiá»ƒm AI: {score}"
    - Body: Link xem chi tiáº¿t há»“ sÆ¡
13. Worker táº¡o notification cho Candidate vÃ  Recruiter
14. Worker log káº¿t quáº£
15. Task hoÃ n thÃ nh

**Luá»“ng sá»± kiá»‡n phá»¥:**

**5a. Gemini API error:**

- 5a1. Worker retry 3 láº§n vá»›i exponential backoff
- 5a2. Náº¿u váº«n lá»—i, log error
- 5a3. Gá»­i email cho admin thÃ´ng bÃ¡o lá»—i
- 5a4. Set Application.ai_score = None, status = PENDING
- 5a5. Káº¿t thÃºc task

**6a. Response khÃ´ng há»£p lá»‡:**

- 6a1. Worker log error
- 6a2. Thá»­ parse láº¡i hoáº·c dÃ¹ng giÃ¡ trá»‹ máº·c Ä‘á»‹nh
- 6a3. Set ai_score = 50 (neutral)
- 6a4. Tiáº¿p tá»¥c bÆ°á»›c 9

**8a. cv_text rá»—ng:**

- 8a1. KhÃ´ng thá»ƒ phÃ¢n tÃ­ch
- 8a2. Set ai_analysis = {"error": "KhÃ´ng thá»ƒ Ä‘á»c CV"}
- 8a3. Gá»­i email yÃªu cáº§u Candidate ná»™p láº¡i CV
- 8a4. Káº¿t thÃºc task

**11a. Gá»­i email tháº¥t báº¡i:**

- 11a1. Thá»­ SendGrid fallback
- 11a2. LÆ°u email vÃ o queue Ä‘á»ƒ gá»­i láº¡i sau
- 11a3. Tiáº¿p tá»¥c bÆ°á»›c 13

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- Task pháº£i cháº¡y báº¥t Ä‘á»“ng bá»™ (Celery)
- Timeout: tá»‘i Ä‘a 30 giÃ¢y cho Gemini API
- Retry strategy: 3 láº§n, exponential backoff
- Rate limit: tá»‘i Ä‘a 10 requests/phÃºt Ä‘áº¿n Gemini API
- Logging Ä‘áº§y Ä‘á»§ Ä‘á»ƒ debug

**Táº§n suáº¥t sá»­ dá»¥ng:** Ráº¥t cao (má»—i láº§n cÃ³ CV má»›i)

---

### UC-25: Táº¡o lá»‹ch phá»ng váº¥n

**MÃ´ táº£:** Recruiter táº¡o lá»‹ch phá»ng váº¥n cho á»©ng viÃªn Ä‘Ã£ Ä‘Æ°á»£c má»i

**Actor chÃ­nh:** Recruiter

**Actor phá»¥:** Email Service

**Tiá»n Ä‘iá»u kiá»‡n:**

- Recruiter Ä‘Ã£ Ä‘Äƒng nháº­p
- Application á»Ÿ tráº¡ng thÃ¡i INTERVIEW
- CÃ³ Ã­t nháº¥t 1 Interviewer trong há»‡ thá»‘ng

**Háº­u Ä‘iá»u kiá»‡n:**

- Interview record Ä‘Æ°á»£c táº¡o
- Email thÃ´ng bÃ¡o Ä‘Æ°á»£c gá»­i Ä‘áº¿n Candidate vÃ  Interviewer
- Notification Ä‘Æ°á»£c táº¡o

**Luá»“ng sá»± kiá»‡n chÃ­nh:**

1. Recruiter truy cáº­p trang chi tiáº¿t há»“ sÆ¡ á»©ng viÃªn
2. Recruiter click nÃºt "Táº¡o lá»‹ch phá»ng váº¥n"
3. Há»‡ thá»‘ng hiá»ƒn thá»‹ form táº¡o lá»‹ch phá»ng váº¥n
4. Recruiter Ä‘iá»n thÃ´ng tin:
   - Thá»i gian phá»ng váº¥n (date + time)
   - Loáº¡i phá»ng váº¥n (ONLINE/OFFLINE)
   - [Náº¿u ONLINE] Link meeting (Zoom/Google Meet)
   - [Náº¿u OFFLINE] Äá»‹a Ä‘iá»ƒm phá»ng váº¥n
   - Chá»n Interviewer (cÃ³ thá»ƒ chá»n nhiá»u ngÆ°á»i - panel)
   - Ghi chÃº bá»• sung (tÃ¹y chá»n)
5. Há»‡ thá»‘ng validate dá»¯ liá»‡u:
   - Thá»i gian pháº£i trong tÆ°Æ¡ng lai
   - Link meeting há»£p lá»‡ (náº¿u ONLINE)
   - Ãt nháº¥t 1 Interviewer Ä‘Æ°á»£c chá»n
6. Há»‡ thá»‘ng kiá»ƒm tra Interviewer khÃ´ng báº­n vÃ o thá»i gian nÃ y
7. Há»‡ thá»‘ng táº¡o Interview record:
   - application_id
   - interview_date
   - interview_type
   - location/meeting_link
   - notes
   - result = PENDING
   - created_by = recruiter_id
8. Há»‡ thá»‘ng lÆ°u vÃ o database
9. Há»‡ thá»‘ng táº¡o InterviewPanel records cho má»—i Interviewer
10. Há»‡ thá»‘ng cáº­p nháº­t Application.status = INTERVIEW (náº¿u chÆ°a)
11. Há»‡ thá»‘ng gá»­i email thÃ´ng bÃ¡o Ä‘áº¿n Candidate:
    - Subject: "ThÃ´ng bÃ¡o lá»‹ch phá»ng váº¥n - {job.title}"
    - Body: Thá»i gian, Ä‘á»‹a Ä‘iá»ƒm/link, lÆ°u Ã½ chuáº©n bá»‹
12. Há»‡ thá»‘ng gá»­i email Ä‘áº¿n tá»«ng Interviewer:
    - Subject: "Báº¡n Ä‘Æ°á»£c gÃ¡n phá»ng váº¥n - {candidate.name}"
    - Body: ThÃ´ng tin á»©ng viÃªn, thá»i gian, link xem CV
13. Há»‡ thá»‘ng táº¡o notification cho Candidate
14. Há»‡ thá»‘ng táº¡o notification cho tá»«ng Interviewer
15. Há»‡ thá»‘ng quay láº¡i trang chi tiáº¿t há»“ sÆ¡
16. Hiá»ƒn thá»‹ thÃ´ng bÃ¡o "Táº¡o lá»‹ch phá»ng váº¥n thÃ nh cÃ´ng"

**Luá»“ng sá»± kiá»‡n phá»¥:**

**5a. Dá»¯ liá»‡u khÃ´ng há»£p lá»‡:**

- 5a1. Há»‡ thá»‘ng hiá»ƒn thá»‹ lá»—i validation cá»¥ thá»ƒ
- 5a2. Quay láº¡i bÆ°á»›c 4

**6a. Interviewer báº­n:**

- 6a1. Há»‡ thá»‘ng hiá»ƒn thá»‹ cáº£nh bÃ¡o "Interviewer X Ä‘Ã£ cÃ³ lá»‹ch vÃ o thá»i gian nÃ y"
- 6a2. Äá» xuáº¥t thá»i gian khÃ¡c
- 6a3. Cho phÃ©p Recruiter bá» qua vÃ  tiáº¿p tá»¥c (vá»›i warning)

**12a. Gá»­i email tháº¥t báº¡i:**

- 12a1. Thá»­ SendGrid fallback
- 12a2. LÆ°u email vÃ o queue
- 12a3. Tiáº¿p tá»¥c bÆ°á»›c 13

**Luá»“ng sá»± kiá»‡n thay tháº¿:**

**4a. Chá»‰nh sá»­a lá»‹ch Ä‘Ã£ tá»“n táº¡i:**

- 4a1. Load dá»¯ liá»‡u Interview hiá»‡n táº¡i
- 4a2. Cho phÃ©p chá»‰nh sá»­a
- 4a3. Gá»­i email "Cáº­p nháº­t lá»‹ch phá»ng váº¥n" thay vÃ¬ "ThÃ´ng bÃ¡o má»›i"

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- Validate timezone (VN: UTC+7)
- Calendar view Ä‘á»ƒ chá»n thá»i gian dá»… dÃ ng
- Gá»£i Ã½ thá»i gian trá»‘ng cá»§a Interviewer
- CÃ³ thá»ƒ táº¡o nhiá»u vÃ²ng phá»ng váº¥n cho 1 á»©ng viÃªn

**Táº§n suáº¥t sá»­ dá»¥ng:** Cao

---

### UC-27: Cáº­p nháº­t káº¿t quáº£ phá»ng váº¥n

**MÃ´ táº£:** Interviewer nháº­p káº¿t quáº£ vÃ  feedback sau khi phá»ng váº¥n á»©ng viÃªn

**Actor chÃ­nh:** Interviewer

**Actor phá»¥:** Email Service, Há»‡ thá»‘ng

**Tiá»n Ä‘iá»u kiá»‡n:**

- Interviewer Ä‘Ã£ Ä‘Äƒng nháº­p
- Interviewer Ä‘Æ°á»£c gÃ¡n vÃ o Interview nÃ y
- Interview Ä‘Ã£ qua thá»i gian phá»ng váº¥n

**Háº­u Ä‘iá»u kiá»‡n:**

- InterviewPanel cÃ³ score vÃ  feedback
- Interview.result Ä‘Æ°á»£c cáº­p nháº­t (náº¿u Ä‘á»§ Ä‘iá»u kiá»‡n)
- Email káº¿t quáº£ Ä‘Æ°á»£c gá»­i (náº¿u Interview hoÃ n thÃ nh)
- Tá»± Ä‘á»™ng táº¡o RecruitmentResult náº¿u PASS vá»›i Ä‘iá»ƒm cao

**Luá»“ng sá»± kiá»‡n chÃ­nh:**

1. Interviewer truy cáº­p trang "Lá»‹ch phá»ng váº¥n cá»§a tÃ´i"
2. Interviewer click vÃ o buá»•i phá»ng váº¥n cáº§n cháº¥m Ä‘iá»ƒm
3. Há»‡ thá»‘ng hiá»ƒn thá»‹ thÃ´ng tin á»©ng viÃªn vÃ  CV
4. Interviewer click "Nháº­p káº¿t quáº£"
5. Há»‡ thá»‘ng hiá»ƒn thá»‹ form cháº¥m Ä‘iá»ƒm
6. Interviewer nháº­p thÃ´ng tin:
   - Äiá»ƒm sá»‘ (0-100)
   - Káº¿t quáº£ (PASS/FAIL)
   - Feedback chi tiáº¿t (text area)
   - ÄÃ¡nh giÃ¡ ká»¹ nÄƒng chuyÃªn mÃ´n (1-5 sao)
   - ÄÃ¡nh giÃ¡ ká»¹ nÄƒng má»m (1-5 sao)
   - ÄÃ¡nh giÃ¡ thÃ¡i Ä‘á»™ (1-5 sao)
7. Há»‡ thá»‘ng validate dá»¯ liá»‡u
8. Há»‡ thá»‘ng lÆ°u vÃ o InterviewPanel:
   - score
   - feedback
   - technical_score
   - soft_skill_score
   - attitude_score
   - updated_by = interviewer_id
   - updated_at = now()
9. Há»‡ thá»‘ng kiá»ƒm tra táº¥t cáº£ Interviewer Ä‘Ã£ cháº¥m Ä‘iá»ƒm chÆ°a
10. **Náº¿u táº¥t cáº£ Ä‘Ã£ cháº¥m:**
    - 10a. TÃ­nh Ä‘iá»ƒm trung bÃ¬nh tá»« táº¥t cáº£ InterviewPanel
    - 10b. XÃ¡c Ä‘á»‹nh result:
      - avg_score >= 70 â†’ PASS
      - avg_score < 70 â†’ FAIL
    - 10c. Cáº­p nháº­t Interview.result vÃ  Interview.score
    - 10d. Gá»­i email káº¿t quáº£ Ä‘áº¿n Candidate
    - 10e. **Náº¿u PASS vÃ  avg_score >= 80:**
      - Tá»± Ä‘á»™ng táº¡o RecruitmentResult vá»›i OFFER
      - Cáº­p nháº­t Application.status = OFFER
      - Gá»­i email chÃºc má»«ng nháº­n OFFER
11. **Náº¿u chÆ°a Ä‘á»§:** Chá»‰ lÆ°u vÃ  chá»
12. Há»‡ thá»‘ng táº¡o notification cho Candidate (náº¿u Ä‘á»§ ngÆ°á»i cháº¥m)
13. Há»‡ thá»‘ng quay láº¡i trang danh sÃ¡ch
14. Hiá»ƒn thá»‹ thÃ´ng bÃ¡o "Cáº­p nháº­t káº¿t quáº£ thÃ nh cÃ´ng"

**Luá»“ng sá»± kiá»‡n phá»¥:**

**7a. Dá»¯ liá»‡u khÃ´ng há»£p lá»‡:**

- 7a1. Hiá»ƒn thá»‹ lá»—i validation
- 7a2. Quay láº¡i bÆ°á»›c 6

**10d. Gá»­i email tháº¥t báº¡i:**

- Fallback sang SendGrid
- LÆ°u vÃ o queue náº¿u cáº£ 2 lá»—i

**10e. Táº¡o OFFER tá»± Ä‘á»™ng:**

- Logic:
  ```python
  if interview.result == 'PASS' and avg_score >= 80:
      if not hasattr(application, 'recruitment_result'):
          RecruitmentResult.objects.create(
              application=application,
              final_decision='OFFER',
              decided_by=system,
              notes=f'Tá»± Ä‘á»™ng táº¡o tá»« phá»ng váº¥n. Äiá»ƒm: {avg_score}'
          )
  ```

**Luá»“ng sá»± kiá»‡n thay tháº¿:**

**6a. Chá»‰nh sá»­a káº¿t quáº£ Ä‘Ã£ nháº­p:**

- 6a1. Load dá»¯ liá»‡u InterviewPanel hiá»‡n táº¡i
- 6a2. Cho phÃ©p chá»‰nh sá»­a
- 6a3. Log lá»‹ch sá»­ chá»‰nh sá»­a (audit trail)

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- Pháº£i cÃ³ audit trail (ai sá»­a, khi nÃ o, giÃ¡ trá»‹ cÅ©/má»›i)
- Interviewer chá»‰ Ä‘Æ°á»£c sá»­a káº¿t quáº£ cá»§a mÃ¬nh
- Admin cÃ³ thá»ƒ xem táº¥t cáº£ káº¿t quáº£
- Äiá»ƒm trung bÃ¬nh lÃ m trÃ²n 1 chá»¯ sá»‘ tháº­p phÃ¢n

**Táº§n suáº¥t sá»­ dá»¥ng:** Cao

---

### UC-30: Táº¡o káº¿t quáº£ tuyá»ƒn dá»¥ng cuá»‘i cÃ¹ng

**MÃ´ táº£:** Recruiter Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh cuá»‘i cÃ¹ng Ä‘á»ƒ gá»­i thÆ° má»i nháº­n viá»‡c (OFFER) hoáº·c thÆ° tá»« chá»‘i (REJECT) cho á»©ng viÃªn sau khi Ä‘Ã£ phá»ng váº¥n xong

**Actor chÃ­nh:** Recruiter, Há»‡ thá»‘ng

**Actor phá»¥:** Email Service

**Tiá»n Ä‘iá»u kiá»‡n:**

- Application Ä‘Ã£ qua phá»ng váº¥n (cÃ³ Interview vá»›i result)
- ChÆ°a cÃ³ RecruitmentResult cho Application nÃ y

**Háº­u Ä‘iá»u kiá»‡n:**

- RecruitmentResult Ä‘Æ°á»£c táº¡o
- Application.status Ä‘Æ°á»£c cáº­p nháº­t
- Email káº¿t quáº£ Ä‘Æ°á»£c gá»­i
- Notification Ä‘Æ°á»£c táº¡o

**Luá»“ng sá»± kiá»‡n chÃ­nh (Manual - Recruiter):**

1. Recruiter truy cáº­p trang chi tiáº¿t há»“ sÆ¡ á»©ng viÃªn
2. Recruiter xem káº¿t quáº£ phá»ng váº¥n vÃ  Ä‘iá»ƒm sá»‘
3. Recruiter click "Gá»­i káº¿t quáº£ tuyá»ƒn dá»¥ng"
4. Há»‡ thá»‘ng hiá»ƒn thá»‹ form táº¡o káº¿t quáº£
5. Recruiter chá»n quyáº¿t Ä‘á»‹nh:
   - **OFFER** (Nháº­n viá»‡c)
   - **REJECT** (Tá»« chá»‘i)
6. Recruiter nháº­p thÃ´ng tin:
   - LÃ½ do quyáº¿t Ä‘á»‹nh
   - [Náº¿u OFFER] Má»©c lÆ°Æ¡ng Ä‘á» nghá»‹
   - [Náº¿u OFFER] NgÃ y báº¯t Ä‘áº§u lÃ m viá»‡c
   - [Náº¿u OFFER] ThÃ´ng tin offer khÃ¡c
   - Ghi chÃº bá»• sung
7. Há»‡ thá»‘ng validate dá»¯ liá»‡u
8. Há»‡ thá»‘ng táº¡o RecruitmentResult:
   - application_id
   - final_decision (OFFER/REJECT)
   - salary_offer (náº¿u OFFER)
   - start_date (náº¿u OFFER)
   - notes
   - decided_by = recruiter_id
   - decided_at = now()
9. Há»‡ thá»‘ng lÆ°u vÃ o database
10. Há»‡ thá»‘ng cáº­p nháº­t Application.status:
    - OFFER â†’ status = OFFER
    - REJECT â†’ status = REJECTED
11. Há»‡ thá»‘ng gá»­i email káº¿t quáº£ Ä‘áº¿n Candidate:
    - **OFFER email:**
      - Subject: "ğŸ‰ ChÃºc má»«ng! Báº¡n Ä‘Ã£ Ä‘Æ°á»£c nháº­n - {job.title}"
      - Body: ThÃ´ng tin offer, má»©c lÆ°Æ¡ng, ngÃ y báº¯t Ä‘áº§u, hÆ°á»›ng dáº«n tiáº¿p theo
    - **REJECT email:**
      - Subject: "Káº¿t quáº£ tuyá»ƒn dá»¥ng - {job.title}"
      - Body: Cáº£m Æ¡n, khuyáº¿n khÃ­ch á»©ng tuyá»ƒn láº§n sau
12. Há»‡ thá»‘ng táº¡o notification cho Candidate
13. Há»‡ thá»‘ng log quyáº¿t Ä‘á»‹nh (audit trail)
14. Há»‡ thá»‘ng quay láº¡i trang chi tiáº¿t há»“ sÆ¡
15. Hiá»ƒn thá»‹ thÃ´ng bÃ¡o "ÄÃ£ gá»­i káº¿t quáº£ tuyá»ƒn dá»¥ng"

**Luá»“ng sá»± kiá»‡n chÃ­nh (Automatic - Há»‡ thá»‘ng):**

1. Há»‡ thá»‘ng detect Interview.result = PASS vá»›i avg_score >= 80
2. Há»‡ thá»‘ng kiá»ƒm tra chÆ°a cÃ³ RecruitmentResult
3. Há»‡ thá»‘ng tá»± Ä‘á»™ng táº¡o RecruitmentResult:
   - final_decision = OFFER
   - decided_by = None (system)
   - notes = "Tá»± Ä‘á»™ng táº¡o tá»« káº¿t quáº£ phá»ng váº¥n xuáº¥t sáº¯c"
4. Thá»±c hiá»‡n bÆ°á»›c 9-13 nhÆ° luá»“ng manual

**Luá»“ng sá»± kiá»‡n phá»¥:**

**5a. Application Ä‘Ã£ cÃ³ RecruitmentResult:**

- 5a1. Hiá»ƒn thá»‹ "ÄÃ£ cÃ³ káº¿t quáº£ tuyá»ƒn dá»¥ng"
- 5a2. Hiá»ƒn thá»‹ thÃ´ng tin káº¿t quáº£ hiá»‡n táº¡i
- 5a3. Cho phÃ©p xem láº¡i, khÃ´ng cho táº¡o má»›i

**7a. Dá»¯ liá»‡u khÃ´ng há»£p lá»‡:**

- 7a1. Hiá»ƒn thá»‹ lá»—i validation
- 7a2. Quay láº¡i bÆ°á»›c 6

**11a. Gá»­i email tháº¥t báº¡i:**

- 11a1. Fallback SendGrid
- 11a2. LÆ°u vÃ o queue
- 11a3. Tiáº¿p tá»¥c bÆ°á»›c 12

**Luá»“ng sá»± kiá»‡n thay tháº¿:**

**6a. Chá»‰nh sá»­a káº¿t quáº£ Ä‘Ã£ tá»“n táº¡i (Admin only):**

- 6a1. Admin cÃ³ thá»ƒ sá»­a quyáº¿t Ä‘á»‹nh
- 6a2. Gá»­i email "Cáº­p nháº­t káº¿t quáº£ tuyá»ƒn dá»¥ng"
- 6a3. Log Ä‘áº§y Ä‘á»§ audit trail

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- Quyáº¿t Ä‘á»‹nh khÃ´ng thá»ƒ xÃ³a, chá»‰ cÃ³ thá»ƒ sá»­a (audit)
- Email OFFER pháº£i chuyÃªn nghiá»‡p, Ä‘áº§y Ä‘á»§ thÃ´ng tin
- Email REJECT pháº£i lá»‹ch sá»±, Ä‘á»™ng viÃªn á»©ng viÃªn
- CÃ³ thá»ƒ Ä‘Ã­nh kÃ¨m file offer letter (PDF)
- Log Ä‘áº§y Ä‘á»§: ai quyáº¿t Ä‘á»‹nh, khi nÃ o, lÃ½ do gÃ¬

**Táº§n suáº¥t sá»­ dá»¥ng:** Cao

---

### UC-31: Gá»­i email káº¿t quáº£ tuyá»ƒn dá»¥ng

**MÃ´ táº£:** Há»‡ thá»‘ng tá»± Ä‘á»™ng gá»­i email thÃ´ng bÃ¡o káº¿t quáº£ tuyá»ƒn dá»¥ng (OFFER/REJECT) Ä‘áº¿n á»©ng viÃªn

**Actor chÃ­nh:** Há»‡ thá»‘ng

**Actor phá»¥:** Email Service (Resend API)

**Tiá»n Ä‘iá»u kiá»‡n:**

- RecruitmentResult Ä‘Ã£ Ä‘Æ°á»£c táº¡o
- Candidate cÃ³ email há»£p lá»‡

**Háº­u Ä‘iá»u kiá»‡n:**

- Email Ä‘Æ°á»£c gá»­i thÃ nh cÃ´ng
- Notification Ä‘Æ°á»£c táº¡o
- Log email Ä‘Æ°á»£c ghi nháº­n

**Luá»“ng sá»± kiá»‡n chÃ­nh:**

1. Há»‡ thá»‘ng detect RecruitmentResult má»›i Ä‘Æ°á»£c táº¡o (signal post_save)
2. Há»‡ thá»‘ng load thÃ´ng tin:
   - Candidate email
   - Job title, company
   - Final decision (OFFER/REJECT)
   - Salary offer, start date (náº¿u OFFER)
   - Notes tá»« Recruiter
3. Há»‡ thá»‘ng xÃ¡c Ä‘á»‹nh template email:
   - **Náº¿u OFFER:** Load template "offer_letter.html"
   - **Náº¿u REJECT:** Load template "rejection_letter.html"
4. Há»‡ thá»‘ng render template vá»›i context data:
   ```python
   context = {
       'candidate_name': candidate.full_name,
       'job_title': job.title,
       'company_name': recruiter.company_name,
       'salary_offer': result.salary_offer,  # Náº¿u OFFER
       'start_date': result.start_date,      # Náº¿u OFFER
       'notes': result.notes,
       'recruiter_name': recruiter.full_name,
       'recruiter_email': recruiter.email,
   }
   ```
5. Há»‡ thá»‘ng táº¡o subject line:
   - **OFFER:** "ğŸ‰ ChÃºc má»«ng! Báº¡n Ä‘Ã£ Ä‘Æ°á»£c nháº­n vÃ o {company_name} - {job_title}"
   - **REJECT:** "ThÃ´ng bÃ¡o káº¿t quáº£ tuyá»ƒn dá»¥ng - {job_title}"
6. Há»‡ thá»‘ng gá»­i email qua Resend API:
   ```python
   send_email(
       to=candidate.email,
       subject=subject,
       html_content=rendered_html,
       from_email="noreply@recruitment.com",
       from_name="Há»‡ thá»‘ng Tuyá»ƒn dá»¥ng"
   )
   ```
7. Há»‡ thá»‘ng kiá»ƒm tra response tá»« API
8. **Náº¿u thÃ nh cÃ´ng:**
   - LÆ°u log: "Email sent to {email} - Result: {decision}"
   - Táº¡o Notification cho Candidate vá»›i link Ä‘áº¿n káº¿t quáº£
9. **Náº¿u tháº¥t báº¡i:**
   - Fallback SendGrid API
   - Náº¿u váº«n tháº¥t báº¡i: LÆ°u vÃ o retry queue
10. Há»‡ thá»‘ng cáº­p nháº­t Application.notification_sent = True
11. Káº¿t thÃºc

**Luá»“ng sá»± kiá»‡n phá»¥:**

**6a. Gá»­i email qua Resend tháº¥t báº¡i:**

- 6a1. Log error: "Resend failed: {error_message}"
- 6a2. Thá»­ gá»­i qua SendGrid API
- 6a3. Náº¿u SendGrid thÃ nh cÃ´ng: Tiáº¿p tá»¥c bÆ°á»›c 7
- 6a4. Náº¿u SendGrid cÅ©ng tháº¥t báº¡i: Tiáº¿p tá»¥c 6b

**6b. Cáº£ 2 API Ä‘á»u tháº¥t báº¡i:**

- 6b1. Log error nghiÃªm trá»ng
- 6b2. LÆ°u email vÃ o FailedEmail table vá»›i:
  - recipient, subject, content
  - error_message
  - retry_count = 0
- 6b3. Celery task sáº½ retry sau 5 phÃºt
- 6b4. Váº«n táº¡o Notification cho user (fallback)

**7a. Email bá»‹ bounce (invalid email):**

- 7a1. Nháº­n webhook tá»« Resend/SendGrid
- 7a2. ÄÃ¡nh dáº¥u candidate.email_valid = False
- 7a3. Táº¡o notification yÃªu cáº§u cáº­p nháº­t email

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- Email OFFER pháº£i chuyÃªn nghiá»‡p, Ä‘áº§y Ä‘á»§:
  - Logo cÃ´ng ty
  - ThÃ´ng tin position, salary, start date
  - Benefits, working hours
  - Next steps: LiÃªn há»‡ trong 3 ngÃ y
  - Chá»¯ kÃ½ recruiter
- Email REJECT pháº£i lá»‹ch sá»±:
  - Cáº£m Æ¡n á»©ng viÃªn Ä‘Ã£ quan tÃ¢m
  - Äá»™ng viÃªn thá»­ láº¡i láº§n sau
  - KhÃ´ng nÃªu lÃ½ do cá»¥ thá»ƒ (trá»« khi recruiter ghi chÃº)
- Retry mechanism: Max 3 láº§n, backoff 5-15-30 phÃºt
- Tracking: Click tracking, open tracking (náº¿u cÃ³)
- Compliance: CÃ³ link "Unsubscribe" (náº¿u yÃªu cáº§u)

**Táº§n suáº¥t sá»­ dá»¥ng:** Cao

---

### UC-32: Xem lá»‹ch sá»­ quyáº¿t Ä‘á»‹nh tuyá»ƒn dá»¥ng

**MÃ´ táº£:** Recruiter vÃ  Admin xem lá»‹ch sá»­ táº¥t cáº£ cÃ¡c quyáº¿t Ä‘á»‹nh tuyá»ƒn dá»¥ng (audit trail) Ä‘á»ƒ theo dÃµi vÃ  phÃ¢n tÃ­ch

**Actor chÃ­nh:** Recruiter, Admin

**Tiá»n Ä‘iá»u kiá»‡n:**

- ÄÃ£ Ä‘Äƒng nháº­p
- [Recruiter] Chá»‰ xem quyáº¿t Ä‘á»‹nh cá»§a cÃ´ng ty mÃ¬nh
- [Admin] Xem táº¥t cáº£

**Háº­u Ä‘iá»u kiá»‡n:**

- Danh sÃ¡ch quyáº¿t Ä‘á»‹nh Ä‘Æ°á»£c hiá»ƒn thá»‹

**Luá»“ng sá»± kiá»‡n chÃ­nh:**

1. NgÆ°á»i dÃ¹ng truy cáº­p "Lá»‹ch sá»­ quyáº¿t Ä‘á»‹nh tuyá»ƒn dá»¥ng"
2. Há»‡ thá»‘ng query RecruitmentResult vá»›i filter:
   - **Recruiter:** results cá»§a cÃ¡c job mÃ  recruiter táº¡o
   - **Admin:** Táº¥t cáº£ results
3. Há»‡ thá»‘ng hiá»ƒn thá»‹ báº£ng vá»›i cÃ¡c cá»™t:
   - **NgÃ y quyáº¿t Ä‘á»‹nh** (decided_at)
   - **á»¨ng viÃªn** (tÃªn + avatar)
   - **Vá»‹ trÃ­ á»©ng tuyá»ƒn** (job title)
   - **Quyáº¿t Ä‘á»‹nh** (Badge: OFFER mÃ u xanh / REJECT mÃ u Ä‘á»)
   - **Má»©c lÆ°Æ¡ng** (náº¿u OFFER)
   - **NgÆ°á»i quyáº¿t Ä‘á»‹nh** (Recruiter name hoáº·c "Há»‡ thá»‘ng")
   - **Thao tÃ¡c** (Xem chi tiáº¿t)
4. Báº£ng há»— trá»£:
   - PhÃ¢n trang: 20 records/trang
   - Sort: Má»›i nháº¥t/CÅ© nháº¥t, Theo tÃªn á»©ng viÃªn, Theo lÆ°Æ¡ng
5. NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ filter:
   - **Theo quyáº¿t Ä‘á»‹nh:** OFFER / REJECT / Táº¥t cáº£
   - **Theo thá»i gian:** HÃ´m nay / 7 ngÃ y / 30 ngÃ y / TÃ¹y chá»‰nh
   - **Theo ngÆ°á»i quyáº¿t Ä‘á»‹nh:** Chá»n recruiter / Há»‡ thá»‘ng
   - **Theo job:** Chá»n tá»« dropdown job list
6. NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ search:
   - TÃ¬m theo tÃªn á»©ng viÃªn
   - TÃ¬m theo email
7. NgÆ°á»i dÃ¹ng click "Xem chi tiáº¿t"
8. Há»‡ thá»‘ng hiá»ƒn thá»‹ modal/page vá»›i thÃ´ng tin Ä‘áº§y Ä‘á»§:
   - ThÃ´ng tin á»©ng viÃªn
   - ThÃ´ng tin job
   - Äiá»ƒm phá»ng váº¥n (náº¿u cÃ³)
   - Quyáº¿t Ä‘á»‹nh vÃ  lÃ½ do
   - Salary offer, start date (náº¿u OFFER)
   - Notes tá»« recruiter
   - Timeline: Ná»™p há»“ sÆ¡ â†’ AI Screening â†’ Interview â†’ Result
   - Audit log: Ai táº¡o, khi nÃ o, cÃ³ sá»­a Ä‘á»•i khÃ´ng
9. [Admin] CÃ³ nÃºt "Export Excel" Ä‘á»ƒ xuáº¥t bÃ¡o cÃ¡o

**Luá»“ng sá»± kiá»‡n phá»¥:**

**9a. Export Excel:**

- 9a1. Admin click "Export Excel"
- 9a2. Chá»n filter vÃ  date range
- 9a3. Há»‡ thá»‘ng generate Excel file vá»›i:
  - Táº¥t cáº£ columns trong báº£ng
  - ThÃªm columns: Email, Phone, NgÃ y ná»™p há»“ sÆ¡, Äiá»ƒm AI, Äiá»ƒm PV
- 9a4. Download file "recruitment*results*{date}.xlsx"

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- Real-time update: Khi cÃ³ quyáº¿t Ä‘á»‹nh má»›i, tá»± Ä‘á»™ng refresh list (WebSocket hoáº·c polling)
- Performance: Index trÃªn decided_at, application_id
- Security: Recruiter khÃ´ng xem Ä‘Æ°á»£c quyáº¿t Ä‘á»‹nh cá»§a cÃ´ng ty khÃ¡c
- Analytics: Hiá»ƒn thá»‹ thá»‘ng kÃª tÃ³m táº¯t:
  - Tá»•ng sá»‘ quyáº¿t Ä‘á»‹nh
  - Tá»· lá»‡ OFFER/REJECT
  - Avg salary offer
  - Avg time to hire (tá»« ná»™p há»“ sÆ¡ Ä‘áº¿n offer)

**Táº§n suáº¥t sá»­ dá»¥ng:** Trung bÃ¬nh

---

### UC-33: Xem danh sÃ¡ch thÃ´ng bÃ¡o

**MÃ´ táº£:** NgÆ°á»i dÃ¹ng xem táº¥t cáº£ cÃ¡c thÃ´ng bÃ¡o (notification) tá»« há»‡ thá»‘ng

**Actor chÃ­nh:** Táº¥t cáº£ user roles

**Tiá»n Ä‘iá»u kiá»‡n:**

- ÄÃ£ Ä‘Äƒng nháº­p

**Háº­u Ä‘iá»u kiá»‡n:**

- Danh sÃ¡ch notification Ä‘Æ°á»£c hiá»ƒn thá»‹
- Badge sá»‘ lÆ°á»£ng notification chÆ°a Ä‘á»c Ä‘Æ°á»£c cáº­p nháº­t

**Luá»“ng sá»± kiá»‡n chÃ­nh:**

1. NgÆ°á»i dÃ¹ng click vÃ o icon "ğŸ””" trÃªn header
2. Há»‡ thá»‘ng hiá»ƒn thá»‹ dropdown vá»›i:
   - **10 notification má»›i nháº¥t** (DESC by created_at)
   - Má»—i notification hiá»ƒn thá»‹:
     - Icon (dá»±a vÃ o type: INFO/SUCCESS/WARNING/ERROR)
     - Title (bold náº¿u chÆ°a Ä‘á»c)
     - Short message (truncate 100 chars)
     - Thá»i gian tÆ°Æ¡ng Ä‘á»‘i ("5 phÃºt trÆ°á»›c", "2 giá» trÆ°á»›c")
   - NÃºt "Xem táº¥t cáº£" á»Ÿ cuá»‘i dropdown
3. **Náº¿u ngÆ°á»i dÃ¹ng click vÃ o 1 notification:**
   - 3a. Há»‡ thá»‘ng cáº­p nháº­t notification.is_read = True
   - 3b. Badge sá»‘ giáº£m Ä‘i 1
   - 3c. Redirect Ä‘áº¿n trang liÃªn quan (vÃ­ dá»¥: application detail, interview schedule)
   - 3d. Close dropdown
4. **Náº¿u ngÆ°á»i dÃ¹ng click "Xem táº¥t cáº£":**
   - 4a. Redirect Ä‘áº¿n trang "/notifications"
   - 4b. Há»‡ thá»‘ng hiá»ƒn thá»‹ trang Ä‘áº§y Ä‘á»§ vá»›i:
     - **Tab "ChÆ°a Ä‘á»c"**: Notifications vá»›i is_read = False
     - **Tab "Táº¥t cáº£"**: Táº¥t cáº£ notifications
   - 4c. Má»—i notification hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§:
     - Icon + Type (INFO/SUCCESS/WARNING/ERROR)
     - Title (bold)
     - Full message
     - Timestamp chÃ­nh xÃ¡c
     - Link "Xem chi tiáº¿t" (náº¿u cÃ³ related object)
   - 4d. CÃ³ phÃ¢n trang: 30 notifications/trang
   - 4e. CÃ³ nÃºt "ÄÃ¡nh dáº¥u táº¥t cáº£ Ä‘Ã£ Ä‘á»c" á»Ÿ Ä‘áº§u trang
   - 4f. CÃ³ filter:
     - Theo loáº¡i (INFO/SUCCESS/WARNING/ERROR)
     - Theo thá»i gian (HÃ´m nay/7 ngÃ y/30 ngÃ y/Táº¥t cáº£)
5. Badge trÃªn icon "ğŸ””" hiá»ƒn thá»‹ sá»‘ notification chÆ°a Ä‘á»c real-time

**Luá»“ng sá»± kiá»‡n phá»¥:**

**4e. ÄÃ¡nh dáº¥u táº¥t cáº£ Ä‘Ã£ Ä‘á»c:**

- 4e1. User click "ÄÃ¡nh dáº¥u táº¥t cáº£ Ä‘Ã£ Ä‘á»c"
- 4e2. Há»‡ thá»‘ng cáº­p nháº­t:
  ```python
  Notification.objects.filter(
      user=request.user,
      is_read=False
  ).update(is_read=True)
  ```
- 4e3. Badge vá» 0
- 4e4. Refresh trang, tab "ChÆ°a Ä‘á»c" trá»‘ng
- 4e5. Hiá»ƒn thá»‹ toast "ÄÃ£ Ä‘Ã¡nh dáº¥u táº¥t cáº£ lÃ  Ä‘Ã£ Ä‘á»c"

**5a. Real-time notification (WebSocket):**

- 5a1. Khi cÃ³ notification má»›i Ä‘Æ°á»£c táº¡o
- 5a2. Backend push qua WebSocket channel cá»§a user
- 5a3. Frontend nháº­n event, cáº­p nháº­t badge +1
- 5a4. Hiá»ƒn thá»‹ toast notification nhá» á»Ÿ gÃ³c mÃ n hÃ¬nh
- 5a5. Play sound (náº¿u user enable)

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- **Performance:** Index trÃªn (user_id, is_read, created_at)
- **Real-time:** WebSocket hoáº·c SSE Ä‘á»ƒ push notification má»›i
- **Retention:** Tá»± Ä‘á»™ng xÃ³a notification > 90 ngÃ y
- **Grouping:** NhÃ³m cÃ¡c notification giá»‘ng nhau (vÃ­ dá»¥: 5 á»©ng viÃªn má»›i ná»™p há»“ sÆ¡ â†’ "5 á»©ng viÃªn má»›i ná»™p há»“ sÆ¡ vÃ o {job}")
- **Privacy:** User chá»‰ xem Ä‘Æ°á»£c notification cá»§a mÃ¬nh
- **Types:**
  - INFO (xanh): ThÃ´ng tin chung
  - SUCCESS (xanh lÃ¡): HÃ nh Ä‘á»™ng thÃ nh cÃ´ng (ná»™p há»“ sÆ¡, gá»­i káº¿t quáº£)
  - WARNING (vÃ ng): Cáº§n chÃº Ã½ (deadline gáº§n, lá»‹ch PV sáº¯p tá»›i)
  - ERROR (Ä‘á»): Lá»—i, tá»« chá»‘i

**Táº§n suáº¥t sá»­ dá»¥ng:** Ráº¥t cao

---

### UC-34: ÄÃ¡nh dáº¥u thÃ´ng bÃ¡o Ä‘Ã£ Ä‘á»c

**MÃ´ táº£:** NgÆ°á»i dÃ¹ng Ä‘Ã¡nh dáº¥u notification lÃ  Ä‘Ã£ Ä‘á»c Ä‘á»ƒ giáº£m sá»‘ lÆ°á»£ng chÆ°a Ä‘á»c

**Actor chÃ­nh:** Táº¥t cáº£ user roles

**Tiá»n Ä‘iá»u kiá»‡n:**

- ÄÃ£ Ä‘Äƒng nháº­p
- CÃ³ notification chÆ°a Ä‘á»c

**Háº­u Ä‘iá»u kiá»‡n:**

- Notification.is_read = True
- Badge sá»‘ giáº£m

**Luá»“ng sá»± kiá»‡n chÃ­nh (Äá»c tá»«ng notification):**

1. User click vÃ o 1 notification trong dropdown hoáº·c trang notifications
2. Há»‡ thá»‘ng gá»­i PATCH request:
   ```
   PATCH /api/notifications/{id}/
   { "is_read": true }
   ```
3. Backend validate: User chá»‰ Ä‘Æ°á»£c sá»­a notification cá»§a mÃ¬nh
4. Backend cáº­p nháº­t:
   ```python
   notification.is_read = True
   notification.read_at = timezone.now()
   notification.save()
   ```
5. Backend return updated notification
6. Frontend cáº­p nháº­t UI:
   - Notification khÃ´ng cÃ²n bold
   - Badge sá»‘ giáº£m 1
7. Frontend redirect Ä‘áº¿n trang liÃªn quan (náº¿u cÃ³ link)

**Luá»“ng sá»± kiá»‡n chÃ­nh (ÄÃ¡nh dáº¥u táº¥t cáº£ Ä‘Ã£ Ä‘á»c):**

1. User click "ÄÃ¡nh dáº¥u táº¥t cáº£ Ä‘Ã£ Ä‘á»c" trÃªn trang notifications
2. Há»‡ thá»‘ng gá»­i POST request:
   ```
   POST /api/notifications/mark-all-read/
   ```
3. Backend cáº­p nháº­t bulk:
   ```python
   count = Notification.objects.filter(
       user=request.user,
       is_read=False
   ).update(
       is_read=True,
       read_at=timezone.now()
   )
   ```
4. Backend return { "count": count }
5. Frontend cáº­p nháº­t:
   - Badge vá» 0
   - Táº¥t cáº£ notification khÃ´ng cÃ²n bold
   - Tab "ChÆ°a Ä‘á»c" trá»‘ng
6. Hiá»ƒn thá»‹ toast "ÄÃ£ Ä‘Ã¡nh dáº¥u {count} thÃ´ng bÃ¡o lÃ  Ä‘Ã£ Ä‘á»c"

**Luá»“ng sá»± kiá»‡n phá»¥:**

**3a. User cá»‘ Ä‘Ã¡nh dáº¥u notification cá»§a ngÆ°á»i khÃ¡c:**

- 3a1. Backend kiá»ƒm tra notification.user != request.user
- 3a2. Return 403 Forbidden
- 3a3. Frontend hiá»ƒn thá»‹ "KhÃ´ng cÃ³ quyá»n"

**4a. KhÃ´ng cÃ³ notification nÃ o chÆ°a Ä‘á»c:**

- 4a1. Backend return { "count": 0 }
- 4a2. Frontend hiá»ƒn thá»‹ "KhÃ´ng cÃ³ thÃ´ng bÃ¡o chÆ°a Ä‘á»c"

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- **Auto mark read:** Notification tá»± Ä‘á»™ng Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u Ä‘Ã£ Ä‘á»c sau khi user click vÃ o (khÃ´ng cáº§n action riÃªng)
- **Debounce:** Náº¿u user click liÃªn tá»¥c, chá»‰ gá»­i 1 request
- **Optimistic UI:** Frontend cáº­p nháº­t UI ngay, khÃ´ng Ä‘á»£i response (rollback náº¿u lá»—i)
- **Bulk operation:** ÄÃ¡nh dáº¥u táº¥t cáº£ pháº£i efficient (1 query UPDATE, khÃ´ng loop)

**Táº§n suáº¥t sá»­ dá»¥ng:** Cao

---

### UC-35: Nháº­n email thÃ´ng bÃ¡o

**MÃ´ táº£:** NgÆ°á»i dÃ¹ng nháº­n email thÃ´ng bÃ¡o vá» cÃ¡c sá»± kiá»‡n quan trá»ng trong há»‡ thá»‘ng

**Actor chÃ­nh:** Táº¥t cáº£ user roles

**Actor phá»¥:** Email Service, Celery Worker

**Tiá»n Ä‘iá»u kiá»‡n:**

- User cÃ³ email há»£p lá»‡
- User.email_notifications_enabled = True (setting)

**Háº­u Ä‘iá»u kiá»‡n:**

- Email Ä‘Æ°á»£c gá»­i Ä‘áº¿n inbox cá»§a user
- Log email Ä‘Æ°á»£c ghi nháº­n

**Luá»“ng sá»± kiá»‡n chÃ­nh:**

1. **Trigger event** xáº£y ra trong há»‡ thá»‘ng:
   - Candidate ná»™p há»“ sÆ¡ â†’ Email cho Recruiter
   - AI hoÃ n thÃ nh sÃ ng lá»c â†’ Email cho Recruiter
   - Recruiter má»i phá»ng váº¥n â†’ Email cho Candidate
   - Interview Ä‘Æ°á»£c táº¡o â†’ Email cho Interviewer
   - Káº¿t quáº£ phá»ng váº¥n â†’ Email cho Candidate
   - Káº¿t quáº£ tuyá»ƒn dá»¥ng â†’ Email cho Candidate
   - Deadline cÃ´ng viá»‡c gáº§n háº¿t â†’ Email reminder
2. Há»‡ thá»‘ng táº¡o Notification trong database (UC-33)
3. Há»‡ thá»‘ng kiá»ƒm tra `user.email_notifications_enabled`
4. **Náº¿u enabled:**
   - 4a. Há»‡ thá»‘ng xÃ¡c Ä‘á»‹nh email template dá»±a vÃ o notification type
   - 4b. Há»‡ thá»‘ng load template HTML tÆ°Æ¡ng á»©ng
   - 4c. Há»‡ thá»‘ng render template vá»›i data:
     ```python
     context = {
         'user_name': user.full_name,
         'notification_title': notification.title,
         'notification_message': notification.message,
         'action_url': f"{FRONTEND_URL}{notification.link}",
         'action_text': "Xem chi tiáº¿t",
         'unsubscribe_url': f"{FRONTEND_URL}/settings/notifications"
     }
     ```
   - 4d. Há»‡ thá»‘ng táº¡o Celery task (async):
     ```python
     send_notification_email.delay(
         user_id=user.id,
         notification_id=notification.id
     )
     ```
5. **Celery worker** xá»­ lÃ½ task:
   - 5a. Load user vÃ  notification tá»« DB
   - 5b. Gá»­i email qua Resend API:
     ```python
     send_email(
         to=user.email,
         subject=f"ğŸ”” {notification.title}",
         html_content=rendered_html,
         from_email="notifications@recruitment.com"
     )
     ```
   - 5c. **Náº¿u thÃ nh cÃ´ng:**
     - Log: "Email notification sent to {email}"
     - Cáº­p nháº­t notification.email_sent = True
   - 5d. **Náº¿u tháº¥t báº¡i:**
     - Retry 3 láº§n vá»›i backoff (5-15-30 phÃºt)
     - Sau 3 láº§n tháº¥t báº¡i: Log error, khÃ´ng gá»­i ná»¯a
6. User nháº­n email trong inbox
7. User click "Xem chi tiáº¿t" â†’ Redirect vá» frontend app

**Luá»“ng sá»± kiá»‡n phá»¥:**

**4. User táº¯t email notifications:**

- 4a. User.email_notifications_enabled = False
- 4b. Há»‡ thá»‘ng chá»‰ táº¡o in-app notification
- 4c. KhÃ´ng gá»­i email

**5b. Gá»­i qua Resend tháº¥t báº¡i:**

- 5b1. Fallback SendGrid API
- 5b2. Náº¿u SendGrid OK: Log "Sent via SendGrid fallback"
- 5b3. Náº¿u cáº£ 2 Ä‘á»u fail: Retry mechanism

**7a. User click "Unsubscribe":**

- 7a1. Redirect vá» trang Settings
- 7a2. Hiá»ƒn thá»‹ toggle "Email notifications"
- 7a3. User táº¯t toggle
- 7a4. Cáº­p nháº­t user.email_notifications_enabled = False
- 7a5. KhÃ´ng cÃ²n nháº­n email ná»¯a (váº«n nháº­n in-app)

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- **Email template:** Professional, responsive (mobile-friendly)
- **Frequency control:** KhÃ´ng spam, group notifications trong 1 email náº¿u quÃ¡ nhiá»u
- **Digest email:** Option gá»­i tá»•ng há»£p 1 ngÃ y (thay vÃ¬ realtime)
- **Priority:**
  - HIGH: Interview invite, Recruitment result â†’ Gá»­i ngay
  - MEDIUM: New application, AI result â†’ CÃ³ thá»ƒ delay 5-10 phÃºt
  - LOW: Reminder â†’ Gá»­i vÃ o giá» há»£p lÃ½ (9AM-5PM)
- **Compliance:**
  - Footer pháº£i cÃ³ link "Unsubscribe"
  - Footer cÃ³ Ä‘á»‹a chá»‰ cÃ´ng ty (GDPR, CAN-SPAM)
- **Tracking:** Log má»i email (sent/failed/bounced) Ä‘á»ƒ audit

**CÃ¡c loáº¡i email notification:**

1. **Cho Candidate:**

   - OTP xÃ¡c thá»±c tÃ i khoáº£n
   - XÃ¡c nháº­n ná»™p há»“ sÆ¡ thÃ nh cÃ´ng
   - Lá»i má»i phá»ng váº¥n
   - Nháº¯c lá»‹ch phá»ng váº¥n (1 ngÃ y trÆ°á»›c)
   - Káº¿t quáº£ phá»ng váº¥n
   - Káº¿t quáº£ tuyá»ƒn dá»¥ng (OFFER/REJECT)

2. **Cho Recruiter:**

   - CÃ³ á»©ng viÃªn má»›i ná»™p há»“ sÆ¡
   - AI hoÃ n thÃ nh sÃ ng lá»c
   - Interviewer gá»­i káº¿t quáº£ phá»ng váº¥n
   - Deadline cÃ´ng viá»‡c sáº¯p háº¿t

3. **Cho Interviewer:**

   - ÄÆ°á»£c gÃ¡n lá»‹ch phá»ng váº¥n má»›i
   - Nháº¯c cháº¥m Ä‘iá»ƒm á»©ng viÃªn

4. **Cho Admin:**
   - BÃ¡o cÃ¡o hÃ ng tuáº§n (digest)
   - Cáº£nh bÃ¡o há»‡ thá»‘ng (errors, high load)

**Táº§n suáº¥t sá»­ dá»¥ng:** Ráº¥t cao

---

### UC-36: Quáº£n lÃ½ ngÆ°á»i dÃ¹ng

**MÃ´ táº£:** Admin xem, chá»‰nh sá»­a, khÃ³a/má»Ÿ khÃ³a tÃ i khoáº£n ngÆ°á»i dÃ¹ng

**Actor chÃ­nh:** Admin

**Tiá»n Ä‘iá»u kiá»‡n:**

- Admin Ä‘Ã£ Ä‘Äƒng nháº­p
- CÃ³ quyá»n admin (role = ADMIN)

**Háº­u Ä‘iá»u kiá»‡n:**

- ThÃ´ng tin user Ä‘Æ°á»£c cáº­p nháº­t
- TÃ i khoáº£n bá»‹ khÃ³a/má»Ÿ khÃ³a
- Log Ä‘Æ°á»£c ghi nháº­n

**Luá»“ng sá»± kiá»‡n chÃ­nh:**

1. Admin truy cáº­p trang "Quáº£n lÃ½ ngÆ°á»i dÃ¹ng"
2. Há»‡ thá»‘ng hiá»ƒn thá»‹ danh sÃ¡ch táº¥t cáº£ users vá»›i báº£ng:
   - ID, Avatar, Há» tÃªn, Email, Role, Tráº¡ng thÃ¡i, NgÃ y Ä‘Äƒng kÃ½, Thao tÃ¡c
3. Admin cÃ³ thá»ƒ:
   - Lá»c theo role (CANDIDATE/RECRUITER/INTERVIEWER/ADMIN)
   - Lá»c theo tráº¡ng thÃ¡i (Active/Inactive/Locked)
   - TÃ¬m kiáº¿m theo tÃªn, email
   - Sáº¯p xáº¿p theo ngÃ y Ä‘Äƒng kÃ½, tÃªn
4. Admin click "Xem chi tiáº¿t" má»™t user
5. Há»‡ thá»‘ng hiá»ƒn thá»‹ trang chi tiáº¿t user vá»›i:
   - ThÃ´ng tin cÃ¡ nhÃ¢n Ä‘áº§y Ä‘á»§
   - Lá»‹ch sá»­ hoáº¡t Ä‘á»™ng (logins, applications náº¿u candidate, jobs náº¿u recruiter)
   - Thá»‘ng kÃª (sá»‘ tin Ä‘Äƒng, sá»‘ há»“ sÆ¡ ná»™p, v.v.)
6. Admin cÃ³ thá»ƒ thá»±c hiá»‡n:
   - **Chá»‰nh sá»­a thÃ´ng tin:**
     - 6a1. Click "Chá»‰nh sá»­a"
     - 6a2. Sá»­a thÃ´ng tin (tÃªn, phone, role, v.v.)
     - 6a3. LÆ°u thay Ä‘á»•i
     - 6a4. Log audit: "Admin X changed user Y's info"
   - **KhÃ³a tÃ i khoáº£n:**
     - 6b1. Click "KhÃ³a tÃ i khoáº£n"
     - 6b2. Nháº­p lÃ½ do khÃ³a
     - 6b3. XÃ¡c nháº­n
     - 6b4. Set user.is_active = False
     - 6b5. Gá»­i email thÃ´ng bÃ¡o cho user
     - 6b6. Log: "Admin X locked user Y. Reason: ..."
   - **Má»Ÿ khÃ³a tÃ i khoáº£n:**
     - 6c1. Click "Má»Ÿ khÃ³a"
     - 6c2. XÃ¡c nháº­n
     - 6c3. Set user.is_active = True
     - 6c4. Gá»­i email thÃ´ng bÃ¡o
     - 6c5. Log: "Admin X unlocked user Y"
   - **Äá»•i máº­t kháº©u:**
     - 6d1. Click "Reset password"
     - 6d2. Generate password má»›i
     - 6d3. Gá»­i email password má»›i cho user
     - 6d4. Log: "Admin X reset password for user Y"
   - **XÃ³a tÃ i khoáº£n (soft delete):**
     - 6e1. Click "XÃ³a tÃ i khoáº£n"
     - 6e2. XÃ¡c nháº­n (cáº£nh bÃ¡o nghiÃªm trá»ng)
     - 6e3. Kiá»ƒm tra rÃ ng buá»™c (cÃ³ jobs, applications Ä‘ang active khÃ´ng)
     - 6e4. Soft delete: user.deleted_at = now()
     - 6e5. Log: "Admin X deleted user Y"

**Luá»“ng sá»± kiá»‡n phá»¥:**

**6a3. Sá»­a thÃ´ng tin nháº¡y cáº£m (email, role):**

- YÃªu cáº§u xÃ¡c nháº­n bá»• sung
- Gá»­i email thÃ´ng bÃ¡o cho user

**6e3. KhÃ´ng thá»ƒ xÃ³a:**

- Náº¿u user cÃ³ dá»¯ liá»‡u quan trá»ng (vÃ­ dá»¥: Recruiter cÃ³ job Ä‘ang active)
- Hiá»ƒn thá»‹ lá»—i "KhÃ´ng thá»ƒ xÃ³a user nÃ y. Vui lÃ²ng xá»­ lÃ½ dá»¯ liá»‡u trÆ°á»›c"

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- PhÃ¢n trang: 50 users/trang
- Export danh sÃ¡ch user ra CSV/Excel
- Audit log Ä‘áº§y Ä‘á»§ má»i thao tÃ¡c
- KhÃ´ng thá»ƒ xÃ³a tÃ i khoáº£n admin cuá»‘i cÃ¹ng
- KhÃ´ng thá»ƒ tá»± khÃ³a tÃ i khoáº£n cá»§a mÃ¬nh

**Táº§n suáº¥t sá»­ dá»¥ng:** Trung bÃ¬nh

---

### UC-37: Quáº£n lÃ½ cÃ´ng ty

**MÃ´ táº£:** Admin quáº£n lÃ½ thÃ´ng tin cÃ¡c cÃ´ng ty trong há»‡ thá»‘ng (tá»« Recruiter accounts)

**Actor chÃ­nh:** Admin

**Tiá»n Ä‘iá»u kiá»‡n:**

- Admin Ä‘Ã£ Ä‘Äƒng nháº­p
- CÃ³ Ã­t nháº¥t 1 Recruiter Ä‘Ã£ Ä‘Äƒng kÃ½

**Háº­u Ä‘iá»u kiá»‡n:**

- ThÃ´ng tin cÃ´ng ty Ä‘Æ°á»£c cáº­p nháº­t
- CÃ´ng ty bá»‹ vÃ´ hiá»‡u hÃ³a (náº¿u cáº§n)

**Luá»“ng sá»± kiá»‡n chÃ­nh:**

1. Admin truy cáº­p "Quáº£n lÃ½ cÃ´ng ty"
2. Há»‡ thá»‘ng query táº¥t cáº£ Recruiter accounts, group by company_name
3. Há»‡ thá»‘ng hiá»ƒn thá»‹ báº£ng vá»›i cÃ¡c cá»™t:
   - **TÃªn cÃ´ng ty** (company_name)
   - **Website** (company_website)
   - **Logo** (thumbnail)
   - **Sá»‘ Recruiter** (count)
   - **Sá»‘ tin Ä‘Äƒng** (active jobs count)
   - **Sá»‘ há»“ sÆ¡ nháº­n** (total applications)
   - **Tráº¡ng thÃ¡i** (Active/Inactive)
   - **NgÃ y tham gia** (first recruiter signup date)
   - **Thao tÃ¡c** (Xem chi tiáº¿t / VÃ´ hiá»‡u hÃ³a)
4. Báº£ng há»— trá»£:
   - Sort theo: TÃªn, Sá»‘ tin Ä‘Äƒng, Sá»‘ há»“ sÆ¡
   - Search theo tÃªn cÃ´ng ty
   - Filter theo tráº¡ng thÃ¡i
   - PhÃ¢n trang: 20 cÃ´ng ty/trang
5. Admin click "Xem chi tiáº¿t" má»™t cÃ´ng ty
6. Há»‡ thá»‘ng hiá»ƒn thá»‹ trang chi tiáº¿t vá»›i:
   - **ThÃ´ng tin cÃ´ng ty:**
     - TÃªn, Website, Logo
     - MÃ´ táº£ (náº¿u cÃ³)
     - Äá»‹a chá»‰, Quy mÃ´
   - **Danh sÃ¡ch Recruiters** cá»§a cÃ´ng ty (báº£ng):
     - TÃªn, Email, Phone
     - NgÃ y tham gia
     - Sá»‘ tin Ä‘Ã£ Ä‘Äƒng
     - Tráº¡ng thÃ¡i account
   - **Danh sÃ¡ch Jobs** cá»§a cÃ´ng ty:
     - Title, Status, Applications count
     - NgÃ y Ä‘Äƒng
   - **Thá»‘ng kÃª:**
     - Tá»•ng sá»‘ tin Ä‘Ã£ Ä‘Äƒng
     - Tá»•ng sá»‘ há»“ sÆ¡ nháº­n
     - Tá»· lá»‡ offer/reject
     - Avg time to hire
7. Admin cÃ³ thá»ƒ thá»±c hiá»‡n:
   - **Chá»‰nh sá»­a thÃ´ng tin cÃ´ng ty:**
     - 7a1. Click "Chá»‰nh sá»­a"
     - 7a2. Sá»­a company_name, website, logo, description
     - 7a3. Cáº­p nháº­t cho táº¥t cáº£ Recruiters cá»§a cÃ´ng ty
     - 7a4. Log: "Admin updated company {name}"
   - **VÃ´ hiá»‡u hÃ³a cÃ´ng ty:**
     - 7b1. Click "VÃ´ hiá»‡u hÃ³a cÃ´ng ty"
     - 7b2. Nháº­p lÃ½ do
     - 7b3. XÃ¡c nháº­n (cáº£nh bÃ¡o: Táº¥t cáº£ tin Ä‘Äƒng sáº½ bá»‹ Ä‘Ã³ng)
     - 7b4. Há»‡ thá»‘ng:
       - Set táº¥t cáº£ Recruiters: is_active = False
       - Set táº¥t cáº£ Jobs: status = CLOSED
       - Gá»­i email thÃ´ng bÃ¡o cho Recruiters
     - 7b5. Log: "Admin disabled company {name}"
   - **KÃ­ch hoáº¡t láº¡i cÃ´ng ty:**
     - 7c1. Click "KÃ­ch hoáº¡t"
     - 7c2. XÃ¡c nháº­n
     - 7c3. Set is_active = True cho Recruiters
     - 7c4. Jobs váº«n CLOSED, recruiter tá»± má»Ÿ láº¡i

**Luá»“ng sá»± kiá»‡n phá»¥:**

**3a. CÃ´ng ty cÃ³ nhiá»u tÃªn (typo, inconsistent):**

- 3a1. Admin tháº¥y: "ABC Company", "ABC Co.", "ABC"
- 3a2. Admin merge cÃ¡c cÃ´ng ty (tool riÃªng)
- 3a3. Chá»n tÃªn chÃ­nh thá»©c
- 3a4. Cáº­p nháº­t táº¥t cáº£ Recruiters vá» tÃªn thá»‘ng nháº¥t

**7b3. KhÃ´ng thá»ƒ vÃ´ hiá»‡u hÃ³a:**

- Náº¿u cÃ´ng ty cÃ³ job Ä‘ang cÃ³ á»©ng viÃªn á»Ÿ tráº¡ng thÃ¡i INTERVIEW
- Hiá»ƒn thá»‹ cáº£nh bÃ¡o: "Vui lÃ²ng hoÃ n táº¥t cÃ¡c phá»ng váº¥n trÆ°á»›c"
- Admin pháº£i xá»­ lÃ½ thá»§ cÃ´ng hoáº·c force disable

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- **Company verification:** Admin cÃ³ thá»ƒ verify cÃ´ng ty (badge "âœ“ Verified")
- **Featured company:** Admin Ä‘Ã¡nh dáº¥u cÃ´ng ty ná»•i báº­t (hiá»ƒn thá»‹ Æ°u tiÃªn)
- **Analytics:** Export bÃ¡o cÃ¡o cÃ´ng ty (Excel) vá»›i thá»‘ng kÃª chi tiáº¿t
- **Bulk actions:** Chá»n nhiá»u cÃ´ng ty â†’ VÃ´ hiá»‡u hÃ³a/KÃ­ch hoáº¡t cÃ¹ng lÃºc
- **Audit log:** Má»i thao tÃ¡c vá»›i cÃ´ng ty pháº£i Ä‘Æ°á»£c log

**Táº§n suáº¥t sá»­ dá»¥ng:** Tháº¥p

---

### UC-38: Xem dashboard thá»‘ng kÃª

**MÃ´ táº£:** Admin xem tá»•ng quan, thá»‘ng kÃª toÃ n há»‡ thá»‘ng qua dashboard vá»›i charts vÃ  metrics

**Actor chÃ­nh:** Admin

**Tiá»n Ä‘iá»u kiá»‡n:**

- Admin Ä‘Ã£ Ä‘Äƒng nháº­p

**Háº­u Ä‘iá»u kiá»‡n:**

- Dashboard Ä‘Æ°á»£c hiá»ƒn thá»‹ vá»›i dá»¯ liá»‡u real-time

**Luá»“ng sá»± kiá»‡n chÃ­nh:**

1. Admin truy cáº­p trang "Dashboard" (hoáº·c trang chá»§ sau khi login)
2. Há»‡ thá»‘ng query dá»¯ liá»‡u thá»‘ng kÃª:
   - Tá»•ng sá»‘ users (group by role)
   - Tá»•ng sá»‘ jobs (group by status)
   - Tá»•ng sá»‘ applications (group by status)
   - Tá»•ng sá»‘ interviews
   - Recruitment results (OFFER/REJECT)
   - Dá»¯ liá»‡u theo thá»i gian (30 ngÃ y gáº§n nháº¥t)
3. Há»‡ thá»‘ng hiá»ƒn thá»‹ dashboard vá»›i layout:

   **Section 1: Key Metrics (Cards vá»›i icon):**

   - **Tá»•ng ngÆ°á»i dÃ¹ng:** 1,234
     - Candidates: 800
     - Recruiters: 400
     - Interviewers: 30
     - Admins: 4
   - **Tin tuyá»ƒn dá»¥ng:** 156
     - Active: 89
     - Draft: 12
     - Closed: 55
   - **Há»“ sÆ¡ á»©ng tuyá»ƒn:** 3,456
     - Pending: 234
     - Screening: 567
     - Interview: 123
     - Offer: 89
     - Rejected: 2,443
   - **Tá»· lá»‡ thÃ nh cÃ´ng:** 2.6%
     - (OFFER / Total applications) \* 100

   **Section 2: Charts:**

   **2.1. Line Chart - "NgÆ°á»i dÃ¹ng má»›i theo thá»i gian":**

   - X-axis: 30 ngÃ y gáº§n nháº¥t
   - Y-axis: Sá»‘ ngÆ°á»i dÃ¹ng Ä‘Äƒng kÃ½
   - Lines: Candidates (xanh), Recruiters (cam), Interviewers (xanh lÃ¡)

   **2.2. Bar Chart - "Há»“ sÆ¡ theo tráº¡ng thÃ¡i":**

   - X-axis: PENDING, SCREENING, INTERVIEW, OFFER, REJECTED
   - Y-axis: Sá»‘ lÆ°á»£ng
   - Colors: Xanh, VÃ ng, Cam, Xanh lÃ¡, Äá»

   **2.3. Pie Chart - "PhÃ¢n bá»‘ ngÆ°á»i dÃ¹ng theo role":**

   - Segments: CANDIDATE (65%), RECRUITER (32%), INTERVIEWER (2%), ADMIN (1%)

   **2.4. Area Chart - "Tin tuyá»ƒn dá»¥ng theo thá»i gian":**

   - X-axis: 30 ngÃ y
   - Y-axis: Sá»‘ tin Ä‘Äƒng
   - Areas: Active (xanh), Closed (xÃ¡m)

   **2.5. Horizontal Bar - "Top 10 cÃ´ng ty cÃ³ nhiá»u tin tuyá»ƒn dá»¥ng nháº¥t":**

   - Y-axis: Company name
   - X-axis: Sá»‘ tin Ä‘Äƒng

   **Section 3: Tables:**

   **3.1. "Tin tuyá»ƒn dá»¥ng má»›i nháº¥t" (5 jobs):**

   - Columns: Title, Company, Status, Applications, NgÃ y Ä‘Äƒng

   **3.2. "Há»“ sÆ¡ má»›i nháº¥t" (10 applications):**

   - Columns: Candidate, Job, Status, Äiá»ƒm AI, NgÃ y ná»™p

   **3.3. "Phá»ng váº¥n sáº¯p tá»›i" (5 interviews):**

   - Columns: Candidate, Job, Interviewer, Thá»i gian

4. Dashboard tá»± Ä‘á»™ng refresh má»—i 5 phÃºt (hoáº·c cÃ³ nÃºt "Refresh")
5. Admin cÃ³ thá»ƒ:
   - Chá»n date range (7 ngÃ y / 30 ngÃ y / 90 ngÃ y / TÃ¹y chá»‰nh)
   - Export dashboard dÆ°á»›i dáº¡ng PDF report
   - Click vÃ o sá»‘ liá»‡u â†’ Xem chi tiáº¿t (vÃ­ dá»¥: Click "156 Jobs" â†’ Trang quáº£n lÃ½ jobs)

**Luá»“ng sá»± kiá»‡n phá»¥:**

**5a. Export PDF report:**

- 5a1. Admin click "Export PDF"
- 5a2. Chá»n date range vÃ  sections cáº§n export
- 5a3. Há»‡ thá»‘ng generate PDF vá»›i:
  - Logo, header
  - Táº¥t cáº£ metrics (dáº¡ng sá»‘ vÃ  text)
  - Charts (convert thÃ nh images)
  - Tables
  - Footer: Generated by {admin_name} at {datetime}
- 5a4. Download "dashboard*report*{date}.pdf"

**5b. Filter by date range:**

- 5b1. Admin chá»n date range
- 5b2. Há»‡ thá»‘ng re-query data
- 5b3. Re-render táº¥t cáº£ charts vÃ  metrics
- 5b4. Animate transition

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- **Performance:**
  - Cache metrics (Redis) 5 phÃºt
  - Aggregation queries pháº£i optimize (indexes)
  - Charts render client-side (Chart.js hoáº·c Recharts)
- **Real-time:**
  - WebSocket update metrics khi cÃ³ event má»›i
  - Badge notification náº¿u cÃ³ váº¥n Ä‘á» (vÃ­ dá»¥: Spike in rejections)
- **Responsive:** Dashboard pháº£i hiá»ƒn thá»‹ tá»‘t trÃªn mobile/tablet
- **Accessibility:** Charts cÃ³ alt text, color-blind friendly
- **Drill-down:** Click vÃ o metric/chart â†’ Chi tiáº¿t hÆ¡n
- **Comparison:** Hiá»ƒn thá»‹ % change so vá»›i ká»³ trÆ°á»›c
  - VÃ­ dá»¥: "1,234 users (+12% so vá»›i tuáº§n trÆ°á»›c)"

**Additional Metrics (Advanced):**

- **Avg time to hire:** Thá»i gian TB tá»« ná»™p há»“ sÆ¡ â†’ offer
- **Avg applications per job:** 3,456 / 156 = 22.1
- **Interview-to-offer ratio:** Tá»· lá»‡ offer/interview
- **Top skills in demand:** Word cloud tá»« job descriptions
- **Peak posting time:** Giá» nÃ o cÃ³ nhiá»u tin Ä‘Äƒng nháº¥t
- **Peak application time:** Giá» nÃ o cÃ³ nhiá»u há»“ sÆ¡ ná»™p nháº¥t

**Táº§n suáº¥t sá»­ dá»¥ng:** Cao (Admin check hÃ ng ngÃ y)

---

### UC-39: Xuáº¥t bÃ¡o cÃ¡o

**MÃ´ táº£:** Admin xuáº¥t bÃ¡o cÃ¡o chi tiáº¿t dÆ°á»›i dáº¡ng Excel hoáº·c PDF vá» cÃ¡c hoáº¡t Ä‘á»™ng trong há»‡ thá»‘ng

**Actor chÃ­nh:** Admin

**Tiá»n Ä‘iá»u kiá»‡n:**

- Admin Ä‘Ã£ Ä‘Äƒng nháº­p
- CÃ³ dá»¯ liá»‡u Ä‘á»ƒ xuáº¥t

**Háº­u Ä‘iá»u kiá»‡n:**

- File bÃ¡o cÃ¡o (Excel/PDF) Ä‘Æ°á»£c generate
- File Ä‘Æ°á»£c download vá» mÃ¡y admin

**Luá»“ng sá»± kiá»‡n chÃ­nh:**

1. Admin truy cáº­p "BÃ¡o cÃ¡o" â†’ "Xuáº¥t bÃ¡o cÃ¡o"
2. Há»‡ thá»‘ng hiá»ƒn thá»‹ form vá»›i cÃ¡c options:

   **BÆ°á»›c 1: Chá»n loáº¡i bÃ¡o cÃ¡o**

   - [ ] BÃ¡o cÃ¡o tuyá»ƒn dá»¥ng (Recruitment Report)
   - [ ] BÃ¡o cÃ¡o ngÆ°á»i dÃ¹ng (User Report)
   - [ ] BÃ¡o cÃ¡o hoáº¡t Ä‘á»™ng (Activity Report)
   - [ ] BÃ¡o cÃ¡o cÃ´ng ty (Company Report)
   - [ ] BÃ¡o cÃ¡o tÃ i chÃ­nh (Financial Report - náº¿u cÃ³ billing)

   **BÆ°á»›c 2: Chá»n ká»³ bÃ¡o cÃ¡o**

   - ( ) Tuáº§n nÃ y
   - ( ) ThÃ¡ng nÃ y
   - ( ) QuÃ½ nÃ y (Q1/Q2/Q3/Q4)
   - ( ) NÄƒm nÃ y
   - (â€¢) TÃ¹y chá»‰nh: [Start Date] â†’ [End Date]

   **BÆ°á»›c 3: Chá»n Ä‘á»‹nh dáº¡ng**

   - ( ) Excel (.xlsx) - Dá»¯ liá»‡u chi tiáº¿t, cÃ³ thá»ƒ phÃ¢n tÃ­ch tiáº¿p
   - (â€¢) PDF (.pdf) - BÃ¡o cÃ¡o formatted, ready to print

   **BÆ°á»›c 4: TÃ¹y chá»n bá»• sung**

   - [x] Bao gá»“m biá»ƒu Ä‘á»“
   - [x] Bao gá»“m thá»‘ng kÃª tÃ³m táº¯t
   - [ ] Chá»‰ dá»¯ liá»‡u tÃ³m táº¯t (khÃ´ng chi tiáº¿t)
   - [ ] NhÃ³m theo cÃ´ng ty
   - [ ] NhÃ³m theo thÃ¡ng

3. Admin click "Xuáº¥t bÃ¡o cÃ¡o"
4. Há»‡ thá»‘ng validate input
5. Há»‡ thá»‘ng hiá»ƒn thá»‹ loading "Äang táº¡o bÃ¡o cÃ¡o... (cÃ³ thá»ƒ máº¥t vÃ i phÃºt)"
6. Há»‡ thá»‘ng táº¡o Celery task Ä‘á»ƒ generate report async:
   ```python
   generate_report.delay(
       report_type='recruitment',
       start_date='2024-01-01',
       end_date='2024-12-31',
       format='pdf',
       options={...}
   )
   ```
7. Celery worker xá»­ lÃ½:
   - 7a. Query dá»¯ liá»‡u tá»« DB theo filter
   - 7b. Aggregate statistics
   - 7c. Generate charts (matplotlib/plotly)
   - 7d. **Náº¿u Excel:**
     - Sá»­ dá»¥ng openpyxl/xlsxwriter
     - Táº¡o multiple sheets (Summary, Details, Charts)
     - Apply formatting (colors, borders, formulas)
   - 7e. **Náº¿u PDF:**
     - Sá»­ dá»¥ng ReportLab/WeasyPrint
     - Render HTML template â†’ PDF
     - Include charts as images
   - 7f. LÆ°u file vÃ o storage (S3/local)
   - 7g. Generate signed download URL (expire 1 giá»)
8. Há»‡ thá»‘ng gá»­i notification cho Admin:
   - "BÃ¡o cÃ¡o Ä‘Ã£ sáºµn sÃ ng. Click Ä‘á»ƒ táº£i xuá»‘ng."
9. Admin click notification hoáº·c refresh trang
10. Há»‡ thá»‘ng hiá»ƒn thá»‹ link download
11. Admin click "Táº£i xuá»‘ng"
12. Browser táº£i file: `recruitment_report_2024.pdf`

**Cáº¥u trÃºc bÃ¡o cÃ¡o:**

**A. BÃ¡o cÃ¡o Tuyá»ƒn dá»¥ng (Recruitment Report):**

- **Summary Page:**
  - Tá»•ng sá»‘ tin Ä‘Äƒng
  - Tá»•ng sá»‘ há»“ sÆ¡ nháº­n
  - Tá»· lá»‡ offer/reject
  - Avg time to hire
  - Top 5 jobs cÃ³ nhiá»u á»©ng viÃªn nháº¥t
- **Details Pages:**
  - Báº£ng chi tiáº¿t táº¥t cáº£ jobs vá»›i: Title, Company, Applications, Offers, Rejections, Status
  - Báº£ng chi tiáº¿t táº¥t cáº£ applications vá»›i: Candidate, Job, Status, AI Score, Interview Score, Result
- **Charts:**
  - Applications by status (Pie)
  - Applications over time (Line)
  - Top companies (Bar)
  - Avg time to hire by company (Bar)

**B. BÃ¡o cÃ¡o NgÆ°á»i dÃ¹ng (User Report):**

- **Summary:**
  - Tá»•ng users by role
  - New signups this period
  - Active users (login trong 30 ngÃ y)
  - Inactive users
- **Details:**
  - Báº£ng táº¥t cáº£ users vá»›i: Name, Email, Role, Signup Date, Last Login, Status
- **Charts:**
  - Users by role (Pie)
  - New signups over time (Line)
  - Active vs Inactive (Bar)

**C. BÃ¡o cÃ¡o Hoáº¡t Ä‘á»™ng (Activity Report):**

- **System Activity:**
  - Total logins
  - Total job posts
  - Total applications
  - Total interviews
  - Total emails sent
- **Details:**
  - Activity log table (recent 1000 actions)
- **Charts:**
  - Activity by hour of day (Heatmap)
  - Activity by day of week (Bar)

**Luá»“ng sá»± kiá»‡n phá»¥:**

**7. Generate report timeout (>5 phÃºt):**

- 7a. Task váº«n cháº¡y background
- 7b. Gá»­i email cho Admin khi xong:
  - Subject: "BÃ¡o cÃ¡o cá»§a báº¡n Ä‘Ã£ sáºµn sÃ ng"
  - Link download trong email

**11a. Download link expired:**

- 11a1. Hiá»ƒn thá»‹ "Link Ä‘Ã£ háº¿t háº¡n"
- 11a2. Admin click "Táº¡o láº¡i link"
- 11a3. Há»‡ thá»‘ng generate URL má»›i (khÃ´ng cáº§n generate láº¡i report)

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- **Performance:**
  - Reports lá»›n (>10k rows) pháº£i async
  - Timeout: 10 phÃºt
  - Progress bar náº¿u cÃ³ thá»ƒ
- **Storage:**
  - LÆ°u reports 30 ngÃ y
  - Auto-delete sau Ä‘Ã³
  - Admin cÃ³ thá»ƒ xem lá»‹ch sá»­ reports Ä‘Ã£ xuáº¥t
- **Security:**
  - Download URL pháº£i signed, expire 1 giá»
  - Chá»‰ admin táº¡o report má»›i download Ä‘Æ°á»£c
- **Quality:**
  - Excel: Freeze panes, auto-filter, format Ä‘áº¹p
  - PDF: Logo, header/footer, page numbers, table of contents
- **Scheduling:**
  - Admin cÃ³ thá»ƒ schedule bÃ¡o cÃ¡o Ä‘á»‹nh ká»³ (tuáº§n/thÃ¡ng)
  - Tá»± Ä‘á»™ng gá»­i email vÃ o sÃ¡ng thá»© 2 hoáº·c Ä‘áº§u thÃ¡ng

**Táº§n suáº¥t sá»­ dá»¥ng:** Tháº¥p (Tuáº§n 1 láº§n hoáº·c cuá»‘i thÃ¡ng)

---

### UC-40: Xem log há»‡ thá»‘ng

**MÃ´ táº£:** Admin xem chi tiáº¿t log cÃ¡c hoáº¡t Ä‘á»™ng trong há»‡ thá»‘ng Ä‘á»ƒ audit, debug vÃ  báº£o máº­t

**Actor chÃ­nh:** Admin

**Tiá»n Ä‘iá»u kiá»‡n:**

- Admin Ä‘Ã£ Ä‘Äƒng nháº­p
- Há»‡ thá»‘ng Ä‘ang ghi log (middleware)

**Háº­u Ä‘iá»u kiá»‡n:**

- Logs Ä‘Æ°á»£c hiá»ƒn thá»‹ vÃ  cÃ³ thá»ƒ filter/search

**Luá»“ng sá»± kiá»‡n chÃ­nh:**

1. Admin truy cáº­p "Log há»‡ thá»‘ng" hoáº·c "Audit Trail"
2. Há»‡ thá»‘ng query ActivityLog table (hoáº·c file logs)
3. Há»‡ thá»‘ng hiá»ƒn thá»‹ báº£ng logs vá»›i cÃ¡c cá»™t:
   - **Timestamp** (YYYY-MM-DD HH:mm:ss)
   - **User** (Name + Avatar, hoáº·c "System")
   - **Action** (Dropdown: login, logout, create, update, delete, view, download, etc.)
   - **Resource Type** (User, Job, Application, Interview, etc.)
   - **Resource ID** (Link Ä‘áº¿n object náº¿u cÃ²n tá»“n táº¡i)
   - **Status** (Badge: SUCCESS mÃ u xanh / ERROR mÃ u Ä‘á» / WARNING mÃ u vÃ ng)
   - **IP Address** (xxx.xxx.xxx.xxx)
   - **User Agent** (Browser info - tooltip)
   - **Details** (Expandable: Before/After values, Error message)
4. Báº£ng hiá»ƒn thá»‹ 100 logs má»›i nháº¥t, phÃ¢n trang 100 logs/trang
5. Admin cÃ³ thá»ƒ **filter**:
   - **Theo User:** Dropdown chá»n user (hoáº·c search)
   - **Theo Action:** Checkboxes (login, create, update, delete, v.v.)
   - **Theo Resource Type:** Dropdown (User, Job, Application, v.v.)
   - **Theo Status:** SUCCESS / ERROR / WARNING / ALL
   - **Theo Thá»i gian:** Date range picker hoáº·c presets:
     - Last 1 hour
     - Last 24 hours
     - Last 7 days
     - Last 30 days
     - Custom range
   - **Theo IP:** Nháº­p IP address (Ä‘á»ƒ track suspicious activity)
6. Admin cÃ³ thá»ƒ **search** full-text:
   - Search trong: User name, Action, Resource type, Details
   - VÃ­ dá»¥: Search "delete" â†’ TÃ¬m táº¥t cáº£ actions xÃ³a
   - VÃ­ dá»¥: Search "john@example.com" â†’ Táº¥t cáº£ logs cá»§a user nÃ y
7. Admin click vÃ o 1 log Ä‘á»ƒ xem chi tiáº¿t
8. Há»‡ thá»‘ng hiá»ƒn thá»‹ modal/page vá»›i thÃ´ng tin Ä‘áº§y Ä‘á»§:
   - **Basic Info:**
     - ID, Timestamp, User, IP, User Agent
   - **Action Details:**
     - Action type, Resource type, Resource ID
     - Status, Error message (náº¿u cÃ³)
   - **Changes (náº¿u update):**
     - Before: { "name": "Old Name", "status": "DRAFT" }
     - After: { "name": "New Name", "status": "ACTIVE" }
     - Diff highlighting
   - **Context:**
     - Request URL, Method (GET/POST/PUT/DELETE)
     - Request params/body (sanitized - khÃ´ng log password)
     - Response status code
   - **Related Logs:**
     - CÃ¡c logs liÃªn quan (cÃ¹ng user, cÃ¹ng resource)
9. Admin cÃ³ thá»ƒ **export logs:**
   - Click "Export"
   - Chá»n format: CSV / JSON
   - Download file vá»›i logs Ä‘Ã£ filter

**Luá»“ng sá»± kiá»‡n phá»¥:**

**6a. Search khÃ´ng cÃ³ káº¿t quáº£:**

- 6a1. Hiá»ƒn thá»‹ "KhÃ´ng tÃ¬m tháº¥y log nÃ o"
- 6a2. Gá»£i Ã½ thá»­ filter khÃ¡c

**9a. Export quÃ¡ nhiá»u logs (>100k):**

- 9a1. Hiá»ƒn thá»‹ warning "QuÃ¡ nhiá»u logs, vui lÃ²ng filter thÃªm"
- 9a2. Hoáº·c táº¡o async export task, gá»­i email khi xong

**CÃ¡c loáº¡i Action Ä‘Æ°á»£c log:**

**1. Authentication:**

- `login` - User Ä‘Äƒng nháº­p (IP, User Agent)
- `logout` - User Ä‘Äƒng xuáº¥t
- `failed_login` - ÄÄƒng nháº­p tháº¥t báº¡i (track brute force)
- `signup` - ÄÄƒng kÃ½ má»›i
- `verify_otp` - XÃ¡c thá»±c OTP
- `password_reset` - Reset máº­t kháº©u

**2. CRUD Operations:**

- `create_user` - Admin táº¡o user má»›i
- `update_user` - Cáº­p nháº­t thÃ´ng tin user (log before/after)
- `delete_user` - XÃ³a user (soft delete)
- `create_job` - Táº¡o tin tuyá»ƒn dá»¥ng
- `update_job` - Sá»­a tin
- `delete_job` - XÃ³a tin
- `create_application` - Ná»™p há»“ sÆ¡
- `update_application_status` - Äá»•i tráº¡ng thÃ¡i há»“ sÆ¡
- `create_interview` - Táº¡o lá»‹ch phá»ng váº¥n
- `update_interview` - Cáº­p nháº­t lá»‹ch
- `create_recruitment_result` - Táº¡o káº¿t quáº£ TD

**3. System Actions:**

- `send_email` - Gá»­i email (to, subject, status)
- `ai_screening` - AI sÃ ng lá»c CV (application_id, score)
- `file_upload` - Upload file (CV, avatar)
- `file_download` - Download CV
- `export_report` - Xuáº¥t bÃ¡o cÃ¡o

**4. Security:**

- `permission_denied` - User cá»‘ truy cáº­p resource khÃ´ng Ä‘Æ°á»£c phÃ©p
- `suspicious_activity` - Há»‡ thá»‘ng detect hÃ nh vi báº¥t thÆ°á»ng
- `account_locked` - TÃ i khoáº£n bá»‹ khÃ³a
- `account_unlocked` - Má»Ÿ khÃ³a

**YÃªu cáº§u Ä‘áº·c biá»‡t:**

- **Performance:**
  - Index trÃªn (timestamp, user_id, action, status)
  - Partition logs theo thÃ¡ng (náº¿u quÃ¡ nhiá»u)
  - Archive logs > 1 nÄƒm sang cold storage
- **Security:**
  - Logs pháº£i immutable (khÃ´ng sá»­a/xÃ³a Ä‘Æ°á»£c)
  - Chá»‰ Admin xem Ä‘Æ°á»£c
  - Sensitive data (password, token) KHÃ”NG Ä‘Æ°á»£c log
- **Retention:**
  - Hot logs: 90 ngÃ y (DB, query nhanh)
  - Warm logs: 1 nÄƒm (Elasticsearch/S3)
  - Cold logs: >1 nÄƒm (Archive, chá»‰ khi cáº§n)
- **Alerting:**
  - Tá»± Ä‘á»™ng cáº£nh bÃ¡o náº¿u:
    - QuÃ¡ nhiá»u failed_login tá»« 1 IP (brute force)
    - QuÃ¡ nhiá»u errors trong 5 phÃºt
    - Sensitive actions (delete_user, update_permissions) â†’ Notification ngay
- **Compliance:**
  - ÄÃ¡p á»©ng yÃªu cáº§u audit (GDPR, SOC2)
  - CÃ³ thá»ƒ prove "ai lÃ m gÃ¬, khi nÃ o"

**UI/UX:**

- Real-time log stream (WebSocket) - Logs má»›i xuáº¥t hiá»‡n tá»± Ä‘á»™ng
- Color coding: SUCCESS (xanh), ERROR (Ä‘á»), WARNING (vÃ ng), INFO (xÃ¡m)
- Expandable rows (click Ä‘á»ƒ xem details, khÃ´ng cáº§n modal)
- Keyboard shortcuts: `/` Ä‘á»ƒ focus search, `Ctrl+K` Ä‘á»ƒ filter

**Táº§n suáº¥t sá»­ dá»¥ng:** Trung bÃ¬nh (Admin check khi cÃ³ váº¥n Ä‘á» hoáº·c audit Ä‘á»‹nh ká»³)

---

## Tá»•ng káº¿t

**Thá»‘ng kÃª Use Case:**

- Tá»•ng sá»‘: 40 Use Cases
- Äá»™ Æ°u tiÃªn Cao: 25 UC
- Äá»™ Æ°u tiÃªn Trung bÃ¬nh: 10 UC
- Äá»™ Æ°u tiÃªn Tháº¥p: 5 UC

**Actors chÃ­nh:**

- Candidate: 15 UC
- Recruiter: 20 UC
- Interviewer: 5 UC
- Admin: 8 UC
- AI System: 3 UC
- Email Service: tÃ­ch há»£p trong nhiá»u UC

**NhÃ³m Use Case theo module:**

1. **Authentication** (6 UC): ÄÄƒng kÃ½, Ä‘Äƒng nháº­p, xÃ¡c thá»±c
2. **Job Management** (7 UC): CRUD tin tuyá»ƒn dá»¥ng
3. **Application Management** (7 UC): Quáº£n lÃ½ há»“ sÆ¡ á»©ng tuyá»ƒn
4. **AI Screening** (3 UC): SÃ ng lá»c CV tá»± Ä‘á»™ng
5. **Interview Management** (6 UC): Quáº£n lÃ½ phá»ng váº¥n
6. **Result Management** (3 UC): Káº¿t quáº£ tuyá»ƒn dá»¥ng
7. **Notification** (3 UC): ThÃ´ng bÃ¡o há»‡ thá»‘ng
8. **Admin** (5 UC): Quáº£n trá»‹ há»‡ thá»‘ng

**Äá»™ phá»©c táº¡p:**

- **Phá»©c táº¡p cao**: UC-14 (Ná»™p há»“ sÆ¡), UC-21 (AI screening), UC-27 (Káº¿t quáº£ PV)
- **Phá»©c táº¡p trung bÃ¬nh**: UC-25 (Lá»‹ch PV), UC-30 (Káº¿t quáº£ TD)
- **Phá»©c táº¡p tháº¥p**: UC-03 (ÄÄƒng nháº­p), UC-08 (Xem danh sÃ¡ch)

---

_Document nÃ y mÃ´ táº£ Ä‘áº§y Ä‘á»§ cÃ¡c Use Case cá»§a Há»‡ thá»‘ng Tuyá»ƒn dá»¥ng NhÃ¢n sá»±. CÃ¡c Use Case Ä‘Ã£ Ä‘Æ°á»£c Ä‘áº·c táº£ chi tiáº¿t vá»›i luá»“ng sá»± kiá»‡n chÃ­nh, phá»¥, tiá»n/háº­u Ä‘iá»u kiá»‡n Ä‘á»ƒ phá»¥c vá»¥ cho viá»‡c phÃ¡t triá»ƒn vÃ  testing._
